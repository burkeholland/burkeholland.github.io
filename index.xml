<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Burke Knows Words</title><link>https://burkeholland.github.io/</link><description>Recent content on Burke Knows Words</description><generator>Hugo -- gohugo.io</generator><language>en-us</language><lastBuildDate>Wed, 17 Feb 2021 10:03:14 -0600</lastBuildDate><atom:link href="https://burkeholland.github.io/index.xml" rel="self" type="application/rss+xml"/><item><title>Google trends shows Python interest surging</title><link>https://burkeholland.github.io/posts/python-interest-surging/</link><pubDate>Wed, 17 Feb 2021 10:03:14 -0600</pubDate><guid>https://burkeholland.github.io/posts/python-interest-surging/</guid><description>&lt;p>While looking at Google Trends the other day for &lt;a href="https://trends.google.com/trends/explore?q=visual%20studio%20code&amp;amp;geo=US">&amp;ldquo;visual studio code&amp;rdquo;&lt;/a>, I noticed that one of the rising trends was &amp;ldquo;visual studio code format json&amp;rdquo;. Today, it&amp;rsquo;s gone, but still in the top related queries along with &amp;ldquo;how to format code&amp;rdquo;.&lt;/p>
&lt;p>This got me curious as to what it is that people search for the most along with &amp;ldquo;visual studio code&amp;rdquo; or &amp;ldquo;vs code&amp;rdquo; in the last 12 months.&lt;/p>
&lt;h2 id="top-related-searches">Top Related Searches&lt;/h2>
&lt;p>It varries slightly depending on whether you search for &amp;ldquo;visual studio code&amp;rdquo; or &amp;ldquo;vs code&amp;rdquo;, but not nearly as much as you might think&amp;hellip;&lt;/p>
&lt;h3 id="visual-studio-code">&amp;ldquo;visual studio code&amp;rdquo;&lt;/h3>
&lt;ol>
&lt;li>visual studio vs visual studio code&lt;/li>
&lt;li>vs code&lt;/li>
&lt;li>vs code vs visual studio&lt;/li>
&lt;li>download visual studio code&lt;/li>
&lt;li>visual studio code python&lt;/li>
&lt;/ol>
&lt;h3 id="vs-code">&amp;ldquo;vs code&amp;rdquo;&lt;/h3>
&lt;ol>
&lt;li>vs code vs visual studio&lt;/li>
&lt;li>visual studio code vs visual studio&lt;/li>
&lt;li>visual studio&lt;/li>
&lt;li>visual studio code&lt;/li>
&lt;li>python&lt;/li>
&lt;/ol>
&lt;p>In both cases, what struck me is that Python shows up in the top 5. What&amp;rsquo;s even more interesting is that if you expand the time range to 2 years, Python drops off the list completely. So in the past 12 months, Python has gone from &amp;ldquo;not on the list&amp;rdquo; to &amp;ldquo;in the top 5&amp;rdquo;. That&amp;rsquo;s quite the movement.&lt;/p>
&lt;h3 id="why-python">Why Python?&lt;/h3>
&lt;p>One of the reasons could be the overall meteoric rise of Python. In December, Stack Overflow reported that it was the &lt;a href="https://insights.stackoverflow.com/survey/2020#most-popular-technologies">4th most popular technology&lt;/a> on their site, beating out Java by 4 percentage points. This was also true in 2019, but only by a razor thin margin when compared to Java. In 2018, it was number 7 overall with Java enjoying a 7 point lead.&lt;/p>
&lt;p>Stack Overflow is only one measurement and certainly pulls only from the &amp;ldquo;Stack Overflow&amp;rdquo; demographic. The TIOBE index attempts to rate based on an aggregation of the &amp;ldquo;number of skilled engineers world-wide, courses and third party vendors.&amp;rdquo; According to &lt;a href="https://www.tiobe.com/tiobe-index/">TIOBE&amp;rsquo;s February 2021 numbers&lt;/a>, Python is number 3, beaten only Java with the leader being C? Which, I was onboard until &amp;ldquo;C&amp;rdquo;. That seems hard to believe.&lt;/p>
&lt;p>So Python is popular, but why is &lt;em>that&lt;/em>?&lt;/p>
&lt;p>There are a lot of potential reasons. Certainly one is that Python is a popular language for students.&lt;/p>
&lt;p>This is because it&amp;rsquo;s syntatically easier to write than it&amp;rsquo;s C-based counterparts. It is also dynamic, which means that it doesn&amp;rsquo;t require a compilation step. And possibly most important of all - it skirts around the painfully abstract &amp;ldquo;object-oriented&amp;rdquo; programming model. I spent far more energy trying to understand classes and inheritance than I ever did using them.&lt;/p>
&lt;p>There is also the rise in popularity of data science as a profession. Although I remain skeptical of this. I still don&amp;rsquo;t know anyone who works as a &amp;ldquo;data scientist&amp;rdquo;. I&amp;rsquo;m not saying the job doesn&amp;rsquo;t exist - I know that it does. And a lot of other people must expect that it does too, because &amp;ldquo;Data scientist or machine learning specialist&amp;rdquo; is the &lt;a href="https://insights.stackoverflow.com/survey/2020#work-whos-actively-looking-for-a-job">#2 on people &amp;ldquo;actively looking for a job&amp;rdquo;&lt;/a> on the same Stack Overflow survey I referenced earlier. But it only occupies &lt;a href="https://insights.stackoverflow.com/survey/2020#developer-roles">8% of the total available roles&lt;/a>. I&amp;rsquo;m just saying that perhaps the hype is a lot bigger than the demand.&lt;/p>
&lt;h2 id="python-is-big">Python is big&lt;/h2>
&lt;p>All arguments on what people are doing with Python aside, it&amp;rsquo;s certainly popular even by Google Trends standards. That&amp;rsquo;s a measurement that is quite hard to deny. So if you are looking to do Python with Visual Studio Code, here is a list of resources that I hope you find helpful&amp;hellip;&lt;/p></description></item><item><title>How to switch themes in VS Code based on the time of day</title><link>https://burkeholland.github.io/posts/vscode/auto-switch-themes/</link><pubDate>Tue, 16 Feb 2021 13:53:57 -0600</pubDate><guid>https://burkeholland.github.io/posts/vscode/auto-switch-themes/</guid><description>&lt;p>It&amp;rsquo;s a good idea to switch between dark and light mode depending on what time of day it is. During the day when your body is more awake, it might make more sense to use a light theme where reading comprehension is better. At night, your eyes become more tired and bright screen light can be harder on your tired eyes.&lt;/p>
&lt;p>Visual Studio Code doesn&amp;rsquo;t do this out-of-the-box, but just like Steve Jobs once said, &amp;ldquo;There&amp;rsquo;s an extension for that&amp;rdquo;.&lt;/p>
&lt;h2 id="theme-switcher-extension">Theme Switcher Extension&lt;/h2>
&lt;p>The &lt;a href="https://marketplace.visualstudio.com/items?itemName=savioserra.theme-switcher&amp;amp;WT.mc_id=devcloud-8766-buhollan">Theme Switcher Extension&lt;/a> for VS Code will let you define times of the day at which to apply a different theme.&lt;/p>
&lt;p>&lt;img src="https://burkeholland.github.io/media/vscode/auto-switch-themes/theme-switcher-extension.jpg" alt="">&lt;/p>
&lt;p>Open the &lt;code>settings.json&lt;/code> file and add in the &lt;code>themeswitcher.mappings&lt;/code> property which takes an array of time and theme combinations. The theme will take affect at the designated time (24 hour format). Here&amp;rsquo;s mine&amp;hellip;&lt;/p>
&lt;div class="highlight">&lt;pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-json" data-lang="json">&lt;span style="color:#e6db74">&amp;#34;themeswitcher.mappings&amp;#34;&lt;/span>&lt;span style="color:#960050;background-color:#1e0010">:&lt;/span> [
{
&lt;span style="color:#f92672">&amp;#34;time&amp;#34;&lt;/span>: &lt;span style="color:#e6db74">&amp;#34;06:00&amp;#34;&lt;/span>,
&lt;span style="color:#f92672">&amp;#34;theme&amp;#34;&lt;/span>: &lt;span style="color:#e6db74">&amp;#34;GitHub Light&amp;#34;&lt;/span>
},
{
&lt;span style="color:#f92672">&amp;#34;time&amp;#34;&lt;/span>: &lt;span style="color:#e6db74">&amp;#34;17:00&amp;#34;&lt;/span>,
&lt;span style="color:#f92672">&amp;#34;theme&amp;#34;&lt;/span>: &lt;span style="color:#e6db74">&amp;#34;GitHub Dark&amp;#34;&lt;/span>
}
]&lt;span style="color:#960050;background-color:#1e0010">,&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>You can have as many of these &amp;ldquo;change points&amp;rdquo; as you like. Change themes every hour if that makes you happy.&lt;/p>
&lt;p>Last, make sure you set the &amp;ldquo;utcOffset&amp;rdquo; property in &lt;code>settings.json&lt;/code> to account for your time zone. The extension doesn&amp;rsquo;t do that autmoatically. I&amp;rsquo;m Central Standard Time which is UTC - 6.&lt;/p>
&lt;div class="highlight">&lt;pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-json" data-lang="json">&lt;span style="color:#e6db74">&amp;#34;themeswitcher.utcOffset&amp;#34;&lt;/span>&lt;span style="color:#960050;background-color:#1e0010">:&lt;/span> &lt;span style="color:#ae81ff">-6&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>You can find your UTC offset based on timezone &lt;a href="https://www.timeanddate.com/time/zones/">here&lt;/a>.&lt;/p>
&lt;p>Now VS Code will switch themes automatically based on the time of day. It&amp;rsquo;s not light theme vs dark theme, it&amp;rsquo;s enjoying the best of both worlds.&lt;/p></description></item><item><title>Beginner's series to Dev Containers free video course</title><link>https://burkeholland.github.io/posts/beginners-series-remote-containers/</link><pubDate>Thu, 11 Feb 2021 08:59:07 -0600</pubDate><guid>https://burkeholland.github.io/posts/beginners-series-remote-containers/</guid><description>&lt;figure class="quote">
&lt;blockquote>
"Knowledge isn't free. You have to pay attention."
&lt;/blockquote>
&lt;figcaption>
&amp;mdash; Richard Feynman
&lt;/figcaption>
&lt;/figure>
&lt;p>Ok, but all &amp;ldquo;play on words&amp;rdquo; aside, knowledge &lt;strong>is&lt;/strong> free. That&amp;rsquo;s the key contribution of the internet, isn&amp;rsquo;t it? That all knowledge is now essentially free? And this is kind of a recent development. It used to cost quite a bit to learn the skills that will make you successful. I mean, there is still a &lt;a href="https://nces.ed.gov/programs/coe/indicator_cud.asp#:~:text=In%202017%E2%80%9318%2C%20total%20revenues,at%20private%20for%2Dprofit%20institutions.">700 billion dollar industry&lt;/a> built on selling you knowledge.&lt;/p>
&lt;p>Even better, you can learn what you &lt;em>need&lt;/em> instead of things that you &lt;em>might&lt;/em> need. It&amp;rsquo;s been several decades and I have not once used &amp;ldquo;&lt;a href="https://www.khanacademy.org/math/algebra/x2f8bb11595b61c86:forms-of-linear-equations/x2f8bb11595b61c86:intro-to-slope-intercept-form/a/introduction-to-slope-intercept-form">Slope Intercept Form&lt;/a>&amp;rdquo;. NOT. ONCE. Well, that&amp;rsquo;s a lie, I had to use it to help my kid with his homework at which point I Googled it. Like an adult.&lt;/p>
&lt;p>But this post is not a shot at Algebra (I love you math people - really I do), this is about MORE free knowledge. Specficially, an 8 part video series on how to use &amp;ldquo;Development Containers&amp;rdquo;.&lt;/p>
&lt;blockquote>
&lt;p>If you prefer reading to videos (you do you) you can get this whole series as &lt;a href="https://docs.microsoft.com/en-us/learn/modules/use-docker-container-dev-env-vs-code?WT.mc_id=devcloud-11496-buhollan">step-by-step tutorial on Microsoft Learn&lt;/a>.&lt;/p>
&lt;/blockquote>
&lt;h2 id="development-containers">Development Containers&lt;/h2>
&lt;p>Development Containers (or Dev Containers) are just Docker containers. But we add a little &lt;a href="https://code.visualstudio.com/download?WT.mc_id=devcloud-11496-buhollan">VS Code&lt;/a> magic in the form of the &lt;a href="https://marketplace.visualstudio.com/items?itemName=ms-vscode-remote.remote-containers&amp;amp;WT.mc_id=devcloud-11496-buhollan">Remote - Containers extension&lt;/a> that allows you to develop &lt;em>inside&lt;/em> of the container right from the editor.&lt;/p>
&lt;p>Now why would you do this? Because once you define a container definition for a project, you can check it in to source as a config file. Then any developer could immediately spin up the right dev environment with &lt;em>zero&lt;/em> configuration. No Python install. No copy/paste cryptic terminal commands from Stack Overflow.&lt;/p>
&lt;p>So how does this work? I&amp;rsquo;m glad you asked! Or didn&amp;rsquo;t ask! Either way, queue up episode 1&amp;hellip;&lt;/p>
&lt;h3 id="episode-1">Episode 1:&lt;/h3>
&lt;p>Start your learning with developing in a Docker container in Visual Studio Code. Learn what it means to configure a container-based development environment, why you might want to develop in a container in VS Code, and what lies ahead in the rest of this video series.&lt;/p>
&lt;div style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden;">
&lt;iframe src="https://www.youtube.com/embed/61M2takIKl8" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border:0;" allowfullscreen title="YouTube Video">&lt;/iframe>
&lt;/div>
&lt;h3 id="episode-2">Episode 2:&lt;/h3>
&lt;p>How to install the Remote - Containers extension in Visual Studio Code and see how it works.&lt;/p>
&lt;div style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden;">
&lt;iframe src="https://www.youtube.com/embed/ACIwcUXfNBI" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border:0;" allowfullscreen title="YouTube Video">&lt;/iframe>
&lt;/div>
&lt;h3 id="episode-3">Episode 3:&lt;/h3>
&lt;p>How to add a dev container to your project in Visual Studio Code using the Remote - Containers extension.&lt;/p>
&lt;div style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden;">
&lt;iframe src="https://www.youtube.com/embed/yucjVHwFO0Y" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border:0;" allowfullscreen title="YouTube Video">&lt;/iframe>
&lt;/div>
&lt;h3 id="episode-4">Episode 4:&lt;/h3>
&lt;p>How to run your configured project in a dev container.&lt;/p>
&lt;div style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden;">
&lt;iframe src="https://www.youtube.com/embed/ELdZxGtqu6w" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border:0;" allowfullscreen title="YouTube Video">&lt;/iframe>
&lt;/div>
&lt;h3 id="episode-5">Episode 5:&lt;/h3>
&lt;p>How to forward a port from your container to your host machine so that you can access the app in the browser.&lt;/p>
&lt;div style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden;">
&lt;iframe src="https://www.youtube.com/embed/3iTZFxfzGl8" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border:0;" allowfullscreen title="YouTube Video">&lt;/iframe>
&lt;/div>
&lt;h3 id="episode-6">Episode 6:&lt;/h3>
&lt;p>How to customize your dev container configuration.&lt;/p>
&lt;div style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden;">
&lt;iframe src="https://www.youtube.com/embed/YtiAUoh2U9A" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border:0;" allowfullscreen title="YouTube Video">&lt;/iframe>
&lt;/div>
&lt;h3 id="episode-7">Episode 7:&lt;/h3>
&lt;p>How to install additional software in your Development container.&lt;/p>
&lt;div style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden;">
&lt;iframe src="https://www.youtube.com/embed/dfj7WxfC_9M" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border:0;" allowfullscreen title="YouTube Video">&lt;/iframe>
&lt;/div>
&lt;h3 id="episode-8">Episode 8:&lt;/h3>
&lt;p>Wrap-up and where to go to learn more about Remote Development.&lt;/p>
&lt;div style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden;">
&lt;iframe src="https://www.youtube.com/embed/oKXkZaAn-IA" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border:0;" allowfullscreen title="YouTube Video">&lt;/iframe>
&lt;/div>
&lt;h2 id="enjoy-your-free-knowledge">Enjoy your free knowledge&lt;/h2>
&lt;p>We hope you enjoy this series on Development Containers. You can check out the &lt;a href="https://www.youtube.com/watch?v=61M2takIKl8&amp;amp;list=PLj6YeMhvp2S5G_X6ZyMc8gfXPMFPg3O31">full playlist on YouTube&lt;/a> or &lt;a href="https://dev.azure.com/devrel/Cloud%20Advocacy/_boards/board/t/Developer%20Cloud/Work%20Items?WT.mc_id=devcloud-11496-buhollan">Microsoft Developer Studios&lt;/a>.&lt;/p></description></item><item><title>Using Azure Logic Apps to auto-print sales orders</title><link>https://burkeholland.github.io/posts/low-code-value/</link><pubDate>Mon, 08 Feb 2021 14:52:29 -0600</pubDate><guid>https://burkeholland.github.io/posts/low-code-value/</guid><description>&lt;p>No / Low Code tools (NoLow - I just coined that) have been the holy grail of software since I got into programming. I remain optimistic, but skeptical in regards to the idea that some day anyone will be able to build apps.&lt;/p>
&lt;p>Optimistic because we really need to get humans out of the business of writing code wherever we can. Less code means less bugs. Skeptical because in the 15 years I&amp;rsquo;ve been a developer, I&amp;rsquo;ve watched so many of these tools come and go. The problem isn&amp;rsquo;t that we haven&amp;rsquo;t made the right tools, it&amp;rsquo;s that you still need to have significant level of technical knowledge about &lt;em>how&lt;/em> a problem can be solved. And that&amp;rsquo;s not something you can abstract away with a nicer UI.&lt;/p>
&lt;p>I think the strongest case for the success of NoLow at the moment has more to do with what it offers current developers than it&amp;rsquo;s ability to turn non-coders into application developers.&lt;/p>
&lt;h2 id="a-nolow-real-world-use-case">A NoLow real world use case&lt;/h2>
&lt;p>My wife owns a small business. It&amp;rsquo;s one of those yard sign businesses that have exploded in popularity during the pandemic. I was skeptical of the long-term viability of a business built on corrugated blown up letters stuck in your yard, but when she put up a sign for my birthday, it did make me feel special and I can understand why she&amp;rsquo;s getting 5 and 6 orders a day at around 75 bucks a pop.&lt;/p>
&lt;p>&lt;img src="https://burkeholland.github.io/media/low-code-value/yard-sign.JPEG" alt="Example yard sign in front of a house">&lt;/p>
&lt;p>I am defacto tech support for all the digital aspects of her business. Since it&amp;rsquo;s a franchise, nearly everything she needs is provided by the company. And, if I might add, it&amp;rsquo;s pretty good. She complains, but she has never used enterprise software before so her only frame of reference is her iPhone, on which everything kind of &amp;ldquo;just works&amp;rdquo;.&lt;/p>
&lt;p>From time to time, she has small automation needs. For instance, she gets orders emailed to her every day. She then has to print those orders out. So she made a simple request to have orders just automatically print out whenever they come in.&lt;/p>
&lt;p>I was halfway to building a Node application that auth&amp;rsquo;d to Gmail, parsed the body with an HTML parser and an npm package to send things to the printer before I realized that this is probably all solvable with low code tools.&lt;/p>
&lt;p>So I built an &lt;a href="https://docs.microsoft.com/azure/logic-apps/quickstart-create-first-logic-app-workflow?WT.mc_id=devcloud-15662-buhollan">Azure Logic App&lt;/a> that does this in - no joke - two steps.&lt;/p>
&lt;h2 id="building-the-logic-app">Building the Logic App&lt;/h2>
&lt;p>First I had some prep work to do.&lt;/p>
&lt;p>I added a label to any incoming order email with an &amp;ldquo;Order&amp;rdquo; label. Gmail calls these &amp;ldquo;filters&amp;rdquo; by the way. The order format ALWAYS starts the same way and they always come from the same sender. Anybody could write this filter.&lt;/p>
&lt;p>&lt;img src="https://burkeholland.github.io/media/low-code-value/email-filter.jpg" alt="Gmail filter screen showing new filter">&lt;/p>
&lt;blockquote>
&lt;p>Note: the easiest way to do this whole thing would be to forward the email once it comes in via the same filter in Gmail - cause you can do that. Unfortunately, this doesn&amp;rsquo;t work. For some reason, the printer won&amp;rsquo;t accept forwarded emails. I lost about an hour to that weirdness.&lt;/p>
&lt;/blockquote>
&lt;p>I started with a blank Logic App and added the Gmail Trigger to start. It has the ability to check for new mail, and you can even specify a label to filter on.&lt;/p>
&lt;p>&lt;img src="https://burkeholland.github.io/media/low-code-value/gmail-trigger.jpg" alt="Logic App showing Gmail Trigger settings">&lt;/p>
&lt;p>The next step is to add an action that sends any emails it found in step one to the printer. I&amp;rsquo;ve got an HP Envy 5640 that supports &lt;a href="https://support.hp.com/us-en/document/c03721293">HP ePrint&lt;/a> - &amp;ldquo;a cloud-based service that lets you print from anywhere&amp;hellip;&amp;rdquo;. Once you set it up, you get a super ugly email address that looks like &lt;code>kslf11skjflk83@hpeprint.com&lt;/code>. But anything you send to that ugliness from a &amp;ldquo;trusted&amp;rdquo; sender will print. It works well.&lt;/p>
&lt;p>&lt;img src="https://burkeholland.github.io/media/low-code-value/full-logic-app.jpg" alt="Logic App showing Gmail Trigger settings and Gmail send email action">&lt;/p>
&lt;blockquote>
&lt;p>I put the printer email in a Logic App parameter so it&amp;rsquo;s not part of the program itself. That&amp;rsquo;s the coder in me. I can&amp;rsquo;t help it.&lt;/p>
&lt;/blockquote>
&lt;p>This runs every 3 minutes and prints new orders when they come in.&lt;/p>
&lt;p>And it is deceptively simple.&lt;/p>
&lt;p>Consider what actually has to occur for this to work&amp;hellip;&lt;/p>
&lt;ol>
&lt;li>Authentication to Gmail on my behalf, implementing an OAuth flow and storing tokens for future requests.&lt;/li>
&lt;li>Querying for any &amp;ldquo;new&amp;rdquo; emails with a particular label&lt;/li>
&lt;li>Parsing the parts of the email and preserving the HTML of the body&lt;/li>
&lt;li>Sending an email on my behalf&lt;/li>
&lt;/ol>
&lt;p>10 years ago we would have coded this from scratch and it would have taken a week - at least. And I would consider this &amp;ldquo;advanced&amp;rdquo; coding given the auth flow requirements. And think of the bugs, testing and maintenance down the line.&lt;/p>
&lt;h2 id="could-anyone-do-this">Could anyone do this?&lt;/h2>
&lt;p>So back to the point - could &lt;em>anyone&lt;/em> do this? It is pretty simple. Certainly a user with a moderate amount of technical knowledge could piece the Logic App together. But could they pull the &lt;em>whole&lt;/em> thing off by themselves?&lt;/p>
&lt;p>I&amp;rsquo;m not so sure. There are a lot of things that I just glossed over where you could get seriously hung up. Think of what you have to &lt;em>know&lt;/em> to build this&amp;hellip;&lt;/p>
&lt;ul>
&lt;li>You have to know that you need to query a collection of items (emails) based on a condition (label)&lt;/li>
&lt;li>You have to know that modern printers have this &amp;ldquo;email to printer&amp;rdquo; capability which requires you to know the printer&amp;rsquo;s IP address which means&amp;hellip;&lt;/li>
&lt;li>You have to know about IP addresses, that they are dynamic, that this will ultimately break your app which means&amp;hellip;&lt;/li>
&lt;li>That you need to change the printer IP to static which means&amp;hellip;&lt;/li>
&lt;li>You have to know how to log-in to your router and configure DHCP.&lt;/li>
&lt;/ul>
&lt;p>Coding is not just knowledge of a language. It is broad knowledge of platforms, and how systems communicate.&lt;/p>
&lt;p>Optimistic, but skeptical.&lt;/p>
&lt;p>For now, I think that NoLow apps might work for certain types of applications - a la &amp;ldquo;forms over data&amp;rdquo; like Microsoft Access. But the real &amp;ldquo;arrived&amp;rdquo; value might, at least today, seems to be enabling current developers to be more productive. It remains to be seen if developers will adopt these tools in lieu of a lucrative career inventing wheels.&lt;/p></description></item><item><title>How to configure a root domain in an Azure Static Web App</title><link>https://burkeholland.github.io/posts/static-app-root-domain/</link><pubDate>Wed, 06 May 2020 14:55:57 -0600</pubDate><guid>https://burkeholland.github.io/posts/static-app-root-domain/</guid><description>&lt;p>&lt;a href="https://docs.microsoft.com/en-us/azure/static-web-apps/?WT.mc_id=staticwebapps-docs-cxa">Azure Static Web Apps&lt;/a> is a new Azure service for hosting static web applications. Azure is very literal when they name things. Want Storage? You need Azure Storage. Want a Serverless function? Azure Functions. Need to host a static web app? &lt;strong>AZURE STATIC WEB APPS&lt;/strong>.&lt;/p>
&lt;p>Static Web Apps is currently in preview, which means not all features that need to be there are quite there yet. One of the features that is currently &lt;a href="https://www.grammarly.com/blog/afk-meaning/">AFK&lt;/a> is support for root domains. You can have &lt;a href="https://www.mystaticsite.com">https://www.mystaticsite.com&lt;/a>, but you cannot have &lt;a href="https://mystaticsite.com">https://mystaticsite.com&lt;/a>.&lt;/p>
&lt;p>OR CAN YOU?&lt;/p>
&lt;p>If you click on those links, you’ll see that they both work. While root domains aren’t officially supported in Azure Static Web Apps, you can make it work with a little bit of DNS trickery and the help of Cloudflare. In this article, I’ll show you how to get a root domain configured for your Static Web App while we’re waiting for official root domain support to arrive.&lt;/p>
&lt;h3 id="setting-up-cloudflare">Setting up Cloudflare&lt;/h3>
&lt;p>Cloudflare is a service that is often placed in front of web sites to provide additional features and security, such as protection against denial of service attacks. Cloudflare has a powerful DNS and page rules engine that you can use to get root domain support for your site.&lt;/p>
&lt;p>First, you need to setup Cloudlfare and make it your DNS provider.&lt;/p>
&lt;p>Sign up for a &lt;a href="https://cloudflare.com">Cloudflare acccount&lt;/a>. They have a free tier, and everything we’re doing here is covered under that free offering.&lt;/p>
&lt;p>Enter your site url as the name.&lt;/p>
&lt;p>&lt;img src="https://burkeholland.github.io/media/static-site-root-domain/cloudflare-new-site.png" alt="cloudflare new site screen">&lt;/p>
&lt;p>Select the Free tier. I put a few extra arrows so you know for sure which one it is.&lt;/p>
&lt;p>&lt;img src="https://burkeholland.github.io/media/static-site-root-domain/free-account.png" alt="cloudflare tier selection screen">&lt;/p>
&lt;p>Since Cloudflare is going to be your new DNS provider, it tries to query your site to see if it can determine what your current DNS records are. This is so you don’t have to copy them all over manually from whatever you current DNS provider is. Click the “continue” button at the bottom of this screen.&lt;/p>
&lt;p>&lt;img src="https://burkeholland.github.io/media/static-site-root-domain/cloudflare-continue.png" alt="cloudflare DNS preview screen">&lt;/p>
&lt;p>Now Cloudflare is going to give you two new nameservers that it wants you to use instead of your current nameservers. This requires logging in to your DNS provider and changing the nameserver. Every provider is different (like snowflakes and Nickelback songs). For this example, we’ll use mine, which is “Namecheap”.&lt;/p>
&lt;p>Go to your domain registrar and log in. Go to wherever it is in your dashboard that allows you to manage your domain. There is usually a “Manage” button or option that you need to click on.&lt;/p>
&lt;p>From your domain dashboard, find the “nameservers” section. By default, this will be your domain registrars default DNS. You’ll need to change it to custom DNS and enter the nameservers that Cloudflare gave you.&lt;/p>
&lt;p>&lt;img src="https://burkeholland.github.io/media/static-site-root-domain/custom-dns.png" alt="cloudflare custom nameserver settings">&lt;/p>
&lt;p>Make sure to save your changes. I always make this mistake because the “save” button in Namecheap is so very, very small and not at all like a save button. I mean, is it just me or is this the smallest save button you have ever seen?&lt;/p>
&lt;p>&lt;img src="https://burkeholland.github.io/media/static-site-root-domain/tiny-save.png" alt="namecheap tiny save button">&lt;/p>
&lt;p>What I’m trying to say is don’t forget to save and “saving” might require you to be a highly trained Army sniper.&lt;/p>
&lt;h4 id="configuring-cnames">Configuring CNAMES&lt;/h4>
&lt;p>What you’ve just done is said that Cloudflare is now managing your DNS. From here on out, all DNS changes we make will be in Cloudflare.&lt;/p>
&lt;p>You’ll need two CNAMEs in Cloudflare DNS. One of them is going to be the “www” which points to the auto-generated domain name that Azure Static Web Apps gives you. The other is going to be a CNAME that points the root domain at the www. This works because Cloudflare supports something called “&lt;a href="https://support.cloudflare.com/hc/en-us/articles/200169056-Understand-and-configure-CNAME-Flattening">CNAME flattening&lt;/a>”. Simply put, it’s going to “flatten” any request to mystaticsite.com over to &lt;a href="http://www.mystaticsite.com">www.mystaticsite.com&lt;/a>.&lt;/p>
&lt;p>&lt;img src="https://burkeholland.github.io/media/static-site-root-domain/two-cnames.png" alt="cloudflare dns dashboard showing two custom CNAME&amp;rsquo;s">&lt;/p>
&lt;p>&lt;strong>IMPORTANT - DON’T SKIP THIS&lt;/strong>: Those orange cloud icons on the right-hand side under “proxy status” are important. For the “www” CNAME, we only want Cloudlfare to act as DNS, so &lt;strong>click on the orange cloud&lt;/strong> to toggle it to grey (DNS only). For the root domain CNAME, we want to proxy all requests through Cloudflare, so leave that one orange.&lt;/p>
&lt;p>At this point, your root domain will work. Kind of. If you navigate to mystaticsite.com (or whatever your domain name is), you will get back the &lt;a href="http://www.mystaticsite.com">www.mystaticsite.com&lt;/a> and your site will load. Awesome!&lt;/p>
&lt;p>&lt;img src="https://burkeholland.github.io/media/static-site-root-domain/kinda-working.png" alt="site kind of working with cloudflare configuration">&lt;/p>
&lt;p>However, if you try and navigate to mystaticsite.com/some/path, the url won’t resolve. That’s because Cloudflare doesn’t recognize the path you just passed in as matching the root CNAME. In order to handle this, we need to setup a page redirect rule.&lt;/p>
&lt;p>Click on the “Page Rules” icon in the Cloudflare navigation bar.&lt;/p>
&lt;p>&lt;img src="https://burkeholland.github.io/media/static-site-root-domain/page-rules-icon.png" alt="cloudflare page rules icon">&lt;/p>
&lt;p>Create a new page rule. Make sure you select the type as “Forwarding URL”. You’ll then need to add in the url you want to match and specify where you want that URL redirected to. The syntax is important. The URL matcher “*” says match yourdomain.com/any/path and redirect it to &lt;a href="http://www.yourdomain.com">www.yourdomain.com&lt;/a>. The $1 appends anything after the .com to the redirect. So if you went to yourdomain.com/any/path you will get redirected to &lt;a href="http://www.yourdomain.com/any/path">www.yourdomain.com/any/path&lt;/a>.&lt;/p>
&lt;p>&lt;img src="https://burkeholland.github.io/media/static-site-root-domain/page-rules-screen.png" alt="cloudflare page rules configuration screen">&lt;/p>
&lt;p>And now - you can select any path you like on your root domain and you will get back the right page in your app.&lt;/p>
&lt;h2 id="when-will-root-domains-be-officially-supported">When will root domains be officially supported?&lt;/h2>
&lt;p>Hopefully sooner than later. Rest easy knowing that the team is keenly aware that root domain support is an essential feature. The change required to support it is bigger than just Static Web Apps, and there is already a plan in place to make that change. It’s a priority for the service, so no need to worry that it will stay like this forever.&lt;/p>
&lt;h2 id="more-azure-static-apps-resources">More Azure Static Apps Resources&lt;/h2>
&lt;ul>
&lt;li>&lt;a href="https://docs.microsoft.com/en-us/azure/static-web-apps/?WT.mc_id=staticwebapps-docs-cxa">Static Web Apps Docs&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://docs.microsoft.com/en-us/learn/modules/publish-app-service-static-web-app-api/?WT.mc_id=staticwebapps-frameworks-cxa">Create and publishing an Angular, React, Svelte or Vue JavaScript app and API&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://docs.microsoft.com/en-us/learn/modules/create-deploy-static-webapp-gatsby-app-service/?WT.mc_id=staticwebapps-sitegen-cxa">Creating and publishing an app with Gatsby&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://github.com/Azure/static-web-apps">Give us your feedback!&lt;/a>&lt;/li>
&lt;/ul></description></item><item><title>Professional quality audio with the Blue Yeti, GarageBand and Screenflow</title><link>https://burkeholland.github.io/posts/audio-how-to/</link><pubDate>Wed, 18 Mar 2020 16:06:44 -0600</pubDate><guid>https://burkeholland.github.io/posts/audio-how-to/</guid><description>&lt;p>One of the best things you can do to improve the quality of your screencasts, is improve the quality of your audio.&lt;/p>
&lt;p>I’m assuming that unless your name is “Dr. Dre”, you probably do not have a professional sound studio in your basement full of high-end equipment and expensive software. And if you’re like me, you don’t even have a basement.&lt;/p>
&lt;p>What I &lt;em>do&lt;/em> have is a Blue Yeti microphone, GarageBand and a copy of Screenflow that I can barely afford. I’ve struggled for a long time to get my audio to sound “good”. I’ve gone back and forth on what the bar for that is. When I first got started, everything I recorded sounded like I was at the bottom of an empty can of tomato soup. With the help of some friends, some Googling and the wisdom of my wife, I’ve seriously improved my station. In this post, I’ll share with you the tips and tricks that you can use to immediately improve your audio quality.&lt;/p>
&lt;h2 id="the-room">The Room&lt;/h2>
&lt;p>First off, let’s talk about your recording space. You are going to want to work and record in the same area. I used to unplug and go into my closet and record. You don’t need to do this. But you do need to do some basic things to your work area.&lt;/p>
&lt;p>When I first started recording in my office, everything was so echo’y. It sounded like I was in a bathtub. My wife pointed out to me that the bare walls, window and floor were not helping. She instituted 3 things in my office that made a whole world of difference.&lt;/p>
&lt;ol>
&lt;li>
&lt;p>She got an area rug. If you have hardwood, tile or laminate floors, an area rug is going to be essential. Sound &lt;strong>loves&lt;/strong> to bounce off anything it can, and it &lt;em>really&lt;/em> likes hard, flat surfaces. An area rug will work wonders.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>She hung curtains next to the window. My drapes don’t even close. They are just there to soak up the sound.&lt;/p>
&lt;/li>
&lt;/ol>
&lt;p>&lt;img src="https://burkeholland.github.io/media/office-curtains.jpg" alt="">&lt;/p>
&lt;ol>
&lt;li>She hung things on the walls. Pictures, guitars, sock monkeys. You get the idea.&lt;/li>
&lt;/ol>
&lt;p>&lt;img src="https://burkeholland.github.io/media/office-walls.jpg" alt="">&lt;/p>
&lt;p>These 3 things were enough to dampen the sound in the room so that it is fit for recording. You don’t actually need a bunch of sound panels or a special box you made out of plywood that sits weirdly in your garage. Just a rug, some drapes and a few wall treatments will do the trick.&lt;/p>
&lt;p>Next, let’s talk about the equipment.&lt;/p>
&lt;h2 id="the-equipment">The Equipment&lt;/h2>
&lt;p>At the risk of looking extremely self-absorbed, here is a picture of my current recording setup…&lt;/p>
&lt;p>&lt;img src="https://burkeholland.github.io/media/my-setup.jpg" alt="">&lt;/p>
&lt;p>My setup will run you about 250$ total. Here are the essential components:&lt;/p>
&lt;h3 id="blue-yeti-microphonehttpswwwamazoncomblue-yeti-usb-microphone-blackoutdpb00n1ypxw2refsr_1_2keywordsblueyetiqid1584566560sr8-2-130">&lt;a href="https://www.amazon.com/Blue-Yeti-USB-Microphone-Blackout/dp/B00N1YPXW2/ref=sr_1_2?keywords=blue+yeti&amp;amp;qid=1584566560&amp;amp;sr=8-2">Blue Yeti Microphone&lt;/a> (130$)&lt;/h3>
&lt;p>This is probably the most popular mic on the market. Some people will say the RODE is better, but don’t listen to them. Listen to me. I’m writing the blog post.&lt;/p>
&lt;h3 id="rode-psa-1-swivel-mount-boom-armhttpswwwamazoncomgpproductb001d7uyborefppx_yo_dt_b_search_asin_titleieutf8psc1-100">&lt;a href="https://www.amazon.com/gp/product/B001D7UYBO/ref=ppx_yo_dt_b_search_asin_title?ie=UTF8&amp;amp;psc=1">RODE PSA 1 Swivel Mount Boom Arm&lt;/a> (100$)&lt;/h3>
&lt;p>If you plan to record audio and the screen at the same time, you have got to get the mic off of your work surface. If you don’t, the mic is going to pick up the concussion from your typing and it’s going to sound less like a keyboard and more like a death metal drum solo.&lt;/p>
&lt;h3 id="foam-windscreenhttpswwwamazoncomgpproductb01bxay8k8refppx_yo_dt_b_search_asin_titleieutf8psc1-13">&lt;a href="https://www.amazon.com/gp/product/B01BXAY8K8/ref=ppx_yo_dt_b_search_asin_title?ie=UTF8&amp;amp;psc=1">Foam Windscreen&lt;/a> (13$)&lt;/h3>
&lt;p>You’ll see people with fancy windscreens and pop filters. That’s the big circle that you usually see between the mic and Taylor Swift when she’s in the recording studio. I &lt;em>almost&lt;/em> bought one of these until my colleague &lt;a href="https://twitter.com/spboyer">Shayne Boyer&lt;/a> pointed out that you can buy a 13$ Windscreen and it works brilliantly.&lt;/p>
&lt;p>OK - that’s the equipment. Let’s talk about the mic configuration for a moment. There are a few key things you need to know about it.&lt;/p>
&lt;h2 id="mic-configuration">Mic Configuration&lt;/h2>
&lt;p>The Blue Yeti is a condensor mic. This means that it’s super sensitive. If you don’t adjust it correctly, it’s going to pick up everything. And I do mean everything. If someone next door sneezes, your ears won’t pick it up, but I swear you will hear it on the video.&lt;/p>
&lt;p>You can fix this, you just need to get the settings right. On the mic, there is a side that has a “Gain” and a “Pattern” option.&lt;/p>
&lt;p>&lt;img src="https://burkeholland.github.io/media/pattern-gain.jpg" alt="">&lt;/p>
&lt;p>The “Gain” is how sensitive you want the mic to be. Since you only want it recording your voice, you want to turn the gain all the way down. That seems completely counter-intuitive, but I promise, this is where you want it.&lt;/p>
&lt;p>The “Pattern” controls where on the mic the audio is picked up. All you have to know here is to pick the upside-down ♡ setting. This setting means that the microphone will pick up audio from the front-side only. That’s the side you are speaking into, so that’s what you want.&lt;/p>
&lt;p>&lt;img src="https://burkeholland.github.io/media/yeti-front.jpg" alt="">&lt;/p>
&lt;p>When you talk into the mic, you want it upright like you see it in the picture above. Talk into it from the front side, not the very top. The Blue Yeti site shows it like this…&lt;/p>
&lt;p>&lt;img src="https://burkeholland.github.io/media/do-dont.jpg" alt="">&lt;/p>
&lt;p>OK - you’re setup to record. The next step is to configure the recording software. When I record screencasts, I record audio first, then I record the video and edit it to go with the audio. This is so that I can record the audio with GarageBand and edit it before I add in the video.&lt;/p>
&lt;h2 id="working-with-garageband">Working with GarageBand&lt;/h2>
&lt;p>If you don’t have a Mac, I’m sorry. Feel free to skip over this section, and frankly, the rest of this post. I have no idea how to do this on Windows, although I’m sure there are some great alternatives.&lt;/p>
&lt;p>For you Mac people, Garage Band is really all you need.&lt;/p>
&lt;p>I record a Narration vocal and I created a custom audio setting using &lt;a href="https://twitter.com/nraboy">Nic Raboy’s&lt;/a> excellent setup from &lt;a href="https://www.thepolyglotdeveloper.com/2016/02/create-podcast-episode-garageband-mac/">an article on this same topic&lt;/a>.&lt;/p>
&lt;p>&lt;img src="https://burkeholland.github.io/media/garageband-settings.jpg" alt="">&lt;/p>
&lt;p>Now, change the way GarageBand is showing your track. By default, it shows “Beats and Project”, which displays your audio over time as “Bars”. This isn’t super helpful for seeing how long your track really is. To fix this, you want to change this so it displays your track as “Time”. This is a hard menu to find, but it’s that tiny arrow next to the “key” display.&lt;/p>
&lt;p>&lt;img src="https://burkeholland.github.io/media/garageband-tiny-arrow.jpg" alt="">&lt;/p>
&lt;p>Select “Time” from the menu that pops up.&lt;/p>
&lt;p>&lt;img src="https://burkeholland.github.io/media/garageband-time.jpg" alt="">&lt;/p>
&lt;p>After you record your audio, you’ll want to edit out your breathing, as well as pops and clicks and other mouth sounds you would rather not expose your listeners to. To do that, select the “Show Editor” option from the view menu.&lt;/p>
&lt;p>&lt;img src="https://burkeholland.github.io/media/garageband-show-editor.jpg" alt="">&lt;/p>
&lt;p>This will open up an editor in the bottom area that allows you to zoom in and edit out parts of the track. You’ll be able to see your breathing just by looking at the track. It’s the flat part in between sections. To remove that area, click and drag to highlight the region you want to remove, and then press “Delete”.&lt;/p>
&lt;p>&lt;img src="https://burkeholland.github.io/media/garageband-click-and-drag.jpg" alt="">&lt;/p>
&lt;p>If you want to move your sections of audio closer together as you cut out the breathing, use the upper track portion. To do the fine grain editing itself, use the editor portion below.&lt;/p>
&lt;p>OK! All your heavy breathing is now out of the picture and your audio sounds good. Export from GarageBand using the “Share/Export Song To Disk” option.&lt;/p>
&lt;p>The last step is to pull it into Screenflow and apply some final tweaks.&lt;/p>
&lt;h2 id="screenflow-audio-tweaks">Screenflow Audio Tweaks&lt;/h2>
&lt;p>Again, this is Mac specific. I do feel bad about the lack of cross-platform-icity in this article. That’s got to count for something.&lt;/p>
&lt;p>In Screenflow, I pull in the audio and then I record my screen to match the audio. This can be a bit tedious, but usually results in a higher quality video. One of the last things I do is tweak the audio in Screenflow.&lt;/p>
&lt;p>I select the entire audio segment and I apply two options…&lt;/p>
&lt;ol>
&lt;li>Smooth Volume Levels&lt;/li>
&lt;li>Remove Background Noise (50%)&lt;/li>
&lt;/ol>
&lt;p>&lt;img src="https://burkeholland.github.io/media/screenflow-audio.jpg" alt="">&lt;/p>
&lt;h2 id="andcut">And…..CUT&lt;/h2>
&lt;p>That’s it! Hopefully there are some tips in here that you find helpful. Don’t be too hard on yourself over your audio. You are never going to get it perfect, but these simple steps should get you about 90% of the way there. The last 10% is all found in Dr. Dre’s basement.&lt;/p>
&lt;p>Oh - and here’s a sample of my audio sounds. FWIW, the bass intro was also recorded in GarageBand…&lt;/p>
&lt;div style="text-align: center;">&lt;iframe width="720" height="405" src="https://www.youtube.com/embed/I789I_aa8UM" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen="">&lt;/iframe>&lt;/div></description></item><item><title>Trimming expenses on The Urlist with Azure Cosmos DB Free Tier</title><link>https://burkeholland.github.io/posts/cosmos-free-tier/</link><pubDate>Tue, 17 Mar 2020 16:09:16 -0600</pubDate><guid>https://burkeholland.github.io/posts/cosmos-free-tier/</guid><description>&lt;summary>
Summary: We migrated &lt;a href="https://www.theurlist.com">theurlist.com&lt;/a> to the new Cosmos DB Free Tier and shaved ~35$ per month off of our Azure bill. Cosmos DB Free Tier gives you 400 RU/s for free every month. This should be more than enough for most small projects.
&lt;p>&lt;/p>
&lt;div class="cta-container">&lt;a class="cta" href="https://devblogs.microsoft.com/cosmosdb/build-apps-for-free-with-azure-cosmos-db-free-tier/?WT.mc_id=personal-blog-buhollan">Get Azure Cosmos DB Free Tier&lt;/a>&lt;/div>
&lt;p>&lt;/p>
&lt;/summary>
&lt;p>&lt;/p>
&lt;p>&lt;a href="https://www.theurlist.com">theurlist.com&lt;/a> is a project that I wrote with my colleague &lt;a href="https://twitter.com/cecilphillip">Cecil Phillip&lt;/a> last year. We wanted to see if we could build a site on Azure that was two things…&lt;/p>
&lt;ol>
&lt;li>Serverless&lt;/li>
&lt;li>Cheap&lt;/li>
&lt;/ol>
&lt;p>Now you would think that “cheap” would go hand-in-hand with “Serverless”, and that’s true. But there are portions of theurlist.com that are not strictly “Serverless” by definition because those pieces didn’t exist in Azure at the time. One of those is our database - Azure Cosmos DB.&lt;/p>
&lt;p>Azure Cosmos DB is the NoSQL data store that backs everything that theurlist.com does. Cosmos DB does not yet allow you to pay by request, or only for what you use. You need to buy something called “Request Units per Second” up front in batches. The lowest amount you can buy is 400, and that costs ~24$ per month.&lt;/p>
&lt;p>The database for theurlist.com is dead simple. It’s one database with one collection.&lt;/p>
&lt;p>&lt;img src="https://burkeholland.github.io/media/linkylinkdb.png" alt="Cosmos DB instance in Data Explorer">&lt;/p>
&lt;blockquote>
&lt;p>The database is called “linkylinkdb”. The original working name for this project was “Linky Link”. Although &lt;a href="http://linkylink.com/">linkylink.com&lt;/a> was already registered and is the home page of a dog named “Lincoln” where you can see a slide show of him in various poses. It’s probably a better use of the URL if we’re being honest.&lt;/p>
&lt;/blockquote>
&lt;p>Monthly traffic to theurlist.com is around 60K visits. This equates to around 2 ru/s in Cosmos DB. TWO. We are currently paying for 400. That’s 200 times more throughput than we need and we’re paying for it. And sometimes we don’t even use that. In fact, in the last 7 days, we haven’t even averaged 1.&lt;/p>
&lt;p>&lt;img src="https://burkeholland.github.io/media/cosmos-db-rus.png" alt="The average number of Cosmos DB RU/s displayed in Azure portal">&lt;/p>
&lt;p>Our 400 RU cost each month, combined with with us occasionally upping the RU/s to do load testing demos tipped our total Cosmos DB bill to around 32$ per month.&lt;/p>
&lt;p>&lt;img src="https://burkeholland.github.io/media/cosmos-db-old-cost.png" alt="Cosmos DB cost summary">&lt;/p>
&lt;p>Most of that we simply aren’t using, but we have to pay for it anyway. Which, doesn’t feel great. In our endless persuit of running a cost-effective app on Azure, we were excited to learn about the launch of the new Cosmos DB Free Tier.&lt;/p>
&lt;h2 id="migrating-to-the-cosmos-db-free-tier">Migrating to the Cosmos DB Free Tier&lt;/h2>
&lt;p>Cosmos DB has officially launched a &lt;a href="https://devblogs.microsoft.com/cosmosdb/build-apps-for-free-with-azure-cosmos-db-free-tier/?WT.mc_id=personal-blog-buhollan">free tier&lt;/a>. But what exactly does that mean?&lt;/p>
&lt;p>Free Tier allows you to have one Cosmos DB account where you apply a “Free Tier” discount. This gives you the first 400 RU/s free every month. They are deducted from the bill. For theurlist.com, this is perfect. We aren’t anywhere &lt;em>near&lt;/em> 400 RU/s. And based on my calculations, if 60K views equates to 2 RU/s, we could go up to 12 MILLION requests per month before we get to 400 RU/s. That’s a LOT of traffic.&lt;/p>
&lt;p>Last week, we migrated our database to the Cosmos DB free tier. We filmed the whole thing so you can see how to move your Cosmos DB database if you’ve got a small project like we do. There are two options you can use in terms of tools to do this.&lt;/p>
&lt;ol>
&lt;li>&lt;a href="https://ms-adf.azure.com?WT.mc_id=personal-blog-buhollan">Azure Data Factory&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://ms-adf.azure.com?WT.mc_id=personal-blog-buhollan">Cosmos DB Migration Tool&lt;/a>&lt;/li>
&lt;/ol>
&lt;p>The Cosmos DB Migration tool is Windows only, so we opted for the Azure Data Factory, which is browser-based.&lt;/p>
&lt;p>The downside of the Azure Data Factory is that we had to create the database and collection before we could migrate the data. If you have a lot of databases or collections, and or you have lots of triggers and stored procedures, you’re better off using the Cosmos DB Migration Tool.&lt;/p>
&lt;p>We decided to record the process in case you are looking to migrate your own Cosmos DB database to the Free Tier. Enjoy!&lt;/p>
&lt;div style="text-align: center;">&lt;iframe width="720" height="405" src="https://www.youtube.com/embed/kEuEvPtgaK0" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen="">&lt;/iframe>&lt;/div></description></item><item><title>Cosmos CRUD</title><link>https://burkeholland.github.io/posts/cosmos-crud/</link><pubDate>Sun, 02 Feb 2020 16:24:55 -0600</pubDate><guid>https://burkeholland.github.io/posts/cosmos-crud/</guid><description>&lt;p>&lt;a href="https://docs.microsoft.com/azure/cosmos-db/sql-api-nodejs-application?WT.mc_id=personal-blog-buhollan">Cosmos DB JavaScript SDK&lt;/a> is clean - I like it. But I feel like I always end up forgetting how to CRUD.&lt;/p>
&lt;p>For the uninitiated in database street-slang, CRUD means Create, Read, Update And Delete. Feel free to use that if you find yourself in a turf war or dance-off.&lt;/p>
&lt;p>Well, I take that back. I can “read” everything purty gud. Actually, I can “create” as well. It’s the retrieving of one item that always throw me off. This is because of partition keys. Partition keys always hang me up (because I am but a simple man) and, well, I need a reminder for how they do and don’t affect retrieving an item, so that’s what I’m going to document in this here article.&lt;/p>
&lt;p>Assume that we’re working with the following document structure with a partition key on “/brand/name”.&lt;/p>
&lt;div class="highlight">
&lt;pre>&lt;code>{
&amp;quot;name&amp;quot;: &amp;quot;Artificial Tree&amp;quot;,
&amp;quot;price&amp;quot;: 250,
&amp;quot;brand&amp;quot;: {
&amp;quot;name&amp;quot;: &amp;quot;Drillco&amp;quot;
},
&amp;quot;stockUnits&amp;quot;: 654,
&amp;quot;id&amp;quot;: &amp;quot;66d7134f-ee03-4cab-b448-ab3bb5098a6f&amp;quot;
}
&lt;/code>&lt;/pre>
&lt;/div>
&lt;p>Assume that all of the following examples have the following connection information…&lt;/p>
&lt;div class="highlight">
&lt;pre>&lt;code>import { CosmosClient } from &amp;quot;@azure/cosmos&amp;quot;;
const client = new CosmosClient(process.env.CONNECTION_STRING);
const database = client.database(&amp;quot;tailwind&amp;quot;);
const container = database.container(&amp;quot;products&amp;quot;);
&lt;/code>&lt;/pre>
&lt;/div>
&lt;h2 id="creating-an-item">Creating an item&lt;/h2>
&lt;div class="highlight">
&lt;pre>&lt;code>async create(product: Product) {
let { resource } = await container.items.create(productToCreate);
return resource;
}
const product = await create({
name: &amp;quot;Hammer&amp;quot;,
price: 10,
brand: {
name: ACME
},
stockUnits: 1500
});
&lt;/code>&lt;/pre>
&lt;/div>
&lt;blockquote>
&lt;p>Note that Cosmos DB auto-creates an id if you don’t pass one in. It will be a GUID.&lt;/p>
&lt;/blockquote>
&lt;h2 id="reading-all-items">Reading all items&lt;/h2>
&lt;div class="highlight">
&lt;pre>&lt;code>async readAll() {
let iterator = container.items.readAll();
let { resources } = await iterator.fetchAll();
return resources;
}
const products = await readAll();
&lt;/code>&lt;/pre>
&lt;/div>
&lt;h2 id="reading-one-item">Reading one item&lt;/h2>
&lt;div class="highlight">
&lt;pre>&lt;code>async read(id: string, brand: string) {
let { resource } = container.item(id, brand).read();
return resource;
}
const product = await read(&amp;quot;66d7134f-ee03-4cab-b448-ab3bb5098a6f&amp;quot;, &amp;quot;Drillco&amp;quot;);
&lt;/code>&lt;/pre>
&lt;/div>
&lt;p>Sometimes you don’t have a partition key. In that case, you’ll want to pass &lt;code>undefined&lt;/code> as the second parameter.&lt;/p>
&lt;div class="highlight">
&lt;pre>&lt;code>async read(id: string) {
let { resource } = container.item(id, undefined).read();
return resource;
}
const product = await read(&amp;quot;66d7134f-ee03-4cab-b448-ab3bb5098a6f&amp;quot;);
&lt;/code>&lt;/pre>
&lt;/div>
&lt;h2 id="update-an-item">Update an item&lt;/h2>
&lt;div class="highlight">
&lt;pre>&lt;code>async update(product: Product) {
// just like with reading one item, if your collection doesn't have a partition key,
// pass &amp;quot;undefined&amp;quot; as the second parameter - container.item(product.id, undefined);
let itemToUpdate = container.item(product.id, product.brand.name);
let { resource } = itemToUpdate.replace(product);
return resource;
}
const product = await update({
name: &amp;quot;Artificial Tree Updated&amp;quot;,
price: 250,
brand: {
&amp;quot;name&amp;quot;: &amp;quot;Drillco&amp;quot;
},
stockUnits: 654,
id: &amp;quot;66d7134f-ee03-4cab-b448-ab3bb5098a6f&amp;quot;
});
&lt;/code>&lt;/pre>
&lt;/div>
&lt;blockquote>
&lt;p>Note that you &lt;strong>have&lt;/strong> to include the id on the object that you pass in to the &lt;code>replace&lt;/code> function. Even though you already specified it when you retrieved the item to update.&lt;/p>
&lt;/blockquote>
&lt;h2 id="delete-an-item">Delete an item&lt;/h2>
&lt;div class="highlight">
&lt;pre>&lt;code>async destroy(id: string, brand: string) {
// just like with reading one item, if your collection doesn't have a partition key,
// pass &amp;quot;undefined&amp;quot; as the second parameter - container.item(product.id, undefined).delete();
await container.item(id, brand).delete();
}
await destroy(&amp;quot;66d7134f-ee03-4cab-b448-ab3bb5098a6f&amp;quot;, &amp;quot;Drillco&amp;quot;)
&lt;/code>&lt;/pre>
&lt;/div>
&lt;h2 id="partition-key-values-vs-names">Partition key values vs names&lt;/h2>
&lt;p>The main takeaway from this article (besides my poor use of grammer and analogy) should be that CosmosDB wants a partition key VALUE, not name. When I was first working with the SDK, I would try to pass in the partition key name (/brand/name). This would throw an error telling me that an object with id of &lt;em>whatever&lt;/em> didn’t exist. That’s because I needed to pass in the &lt;em>value&lt;/em> of the partition key, not the name. This is why you need to pass in &lt;em>undefined&lt;/em> if you do &lt;strong>not&lt;/strong> have a partition key defined for your collection.&lt;/p>
&lt;p>There is a pretty good tutorial you can go through &lt;a href="https://docs.microsoft.com/azure/cosmos-db/sql-api-nodejs-application?WT.mc_id=personal-blog-buhollan">here&lt;/a> that covers this in more detail and shows it in a Node/Express context.&lt;/p>
&lt;p>I hope this helps. Good luck out there.&lt;/p></description></item><item><title>How to create a Reminder on Apple Watch without creating a Reminder</title><link>https://burkeholland.github.io/posts/apple-watch-reminders/</link><pubDate>Wed, 29 Jan 2020 14:34:39 -0600</pubDate><guid>https://burkeholland.github.io/posts/apple-watch-reminders/</guid><description>&lt;p>I have an Apple Watch (&lt;strong>not&lt;/strong> cellular), and I love it. Not just because it lets everyone know that I’m better than them, but also for it’s ability to sync and store all of my audio to be used offline. I can download my music (including Apple Music), podcasts and &lt;a href="https://www.audible.com/ep/apple">now even Audible books&lt;/a> to my Watch and take it all with me when I exercise. This means I don’t have to strap my iPhone to arm like giant medievil shield. I can’t understate how much I enjoy this feature of the watch. If all the thing could do was play my music, podcasts and audio books without requiring a connection, it would still be worth the price.&lt;/p>
&lt;p>The one other thing that I use the Watch for with some frequency, is reminders.&lt;/p>
&lt;p>Apple Reminders are how I function in life. I don’t know how everyone else out there gets by, but I always feel like I have a thousand things that I need to get done. And if I don’t do them, nobody will. These are work things, yes. But they are also personal items: pay off the credit card. Pick up medication. Remind one of the kids about an upcoming assignment that there is a 100% chance they have not yet completed.&lt;/p>
&lt;p>I create these reminders with Siri via the Apple Watch. Now, I’d like to gloss over that last sentence because I have so much to say about how much I don’t enjoy that. Or the fact that it only works about 50% of the time. The rest of the time it just ignores me, cuts me off, or creates a cryptic reminder that is a pretty far cry from what I actually said. Like this one…&lt;/p>
&lt;p>&lt;img src="https://burkeholland.github.io/media/reminder-bs.png" alt="Apple Reminder that says &amp;ldquo;Finish the BS of a proposal&amp;rdquo;">&lt;/p>
&lt;p>I mean, all my proposals are technically BS, but I have no idea what this is supposed to mean. Here’s another one…&lt;/p>
&lt;p>&lt;img src="https://burkeholland.github.io/media/reminder-warts.png" alt="Apple Reminder that says &amp;ldquo;Paint the warts&amp;rdquo;">&lt;/p>
&lt;p>Again. I’m nearly certain that is not what I said. Now I have to decode that like some sort of Saturday morning NPR gameshow.&lt;/p>
&lt;p>And look - my memory is bad and getting worse. When I say I use Reminders a lot, I mean it. I use it for everything. For example…&lt;/p>
&lt;p>&lt;img src="https://burkeholland.github.io/media/reminder-gate-check.png" alt="Apple Reminder that says &amp;ldquo;You gate checked your bag&amp;rdquo;">&lt;/p>
&lt;p>I would (and have) walked off the plane and nearly made it to an Uber before I remembered that I don’t have my bag. It’s that bad y’all. You have no idea what it was like trying to get through school as a child. Or if you have ADD, maybe you do. I have three kids and one of them struggles with it just like I did. He can barely remember to leave the house with pants on, let alone what homework he needs to do, what paper is where or what test is when. So I set an Apple Reminder for myself to remind him. Apple Reminders are how I function in life.&lt;/p>
&lt;p>The thing is, you can’t create a reminder from your Apple Watch if the phone isn’t nearby. I always have my phone on me or at least nearby. Unless I’m out jogging.&lt;/p>
&lt;h2 id="jogging-the-memory">Jogging the memory&lt;/h2>
&lt;p>For some reason, jogging my body also jogs my brain. I tend to remember something important that I need to do when I’m 2.5 miles from the house and my phone. This is a panicky moment for me. I have an important thing I need to do, and there is no way I will remember by the end of my run. I know myself too well. But I can’t create a reminder because Siri won’t work without the phone. This has happened to me so often that I came up with a way to use my phone to create a Reminder quickly (while I’m running) and offline, without actually creating a reminder.&lt;/p>
&lt;p>It’s simple - just change the Watch face.&lt;/p>
&lt;p>By default, my Watch face is the “Infograph Modular”. For those who don’t know all of the Apple Watch faces by name, that’s this one…&lt;/p>
&lt;center>![Infograph Modular Apple Watch face](/media/infograph-modular.png)&lt;/center>
&lt;p>If I swipe right (swipe-right joke redacted) two times, I get the Mickey Mouse face…&lt;/p>
&lt;center>![Mickey Mouse Apple Watch face](/media/mickey-mouse.png)&lt;/center>
&lt;p>Now, at some point after I get home and finish my run, I will look at my watch and see Mickey. That will remind me of the thing I need to do. It works. Every time. I can instantly recall what I was thinking of at the time I made Mickey front-and-center in my life. Then I complete the task and change the face back.&lt;/p>
&lt;p>Now here’s what’s fascinating - this &lt;em>doesn’t&lt;/em> work if I switch to some other face besides Mickey. It will work in so much as it reminds me that I needed to do something, but at least 50% of the time I can’t remember what that something is!&lt;/p>
&lt;p>I have completely unscientific idea as to why my brain is able to associate Mickey with another idea, and use that as a marker for recall with almost 100% accuracy. The difference between the Mickey face and all the other faces is that Mickey illicits an emtional response from me. It’s slight, but it’s there. I &lt;em>think&lt;/em> it’s nastalgia. That seems most likely since Disney was such a core part of my childhood. Even as an adult, the thought of going to Disney World gets me excited, and I’m really not that into Disney anymore as a 41 year-old. I think it’s that emotional trigger coupled with the idea that makes the recall so effective. That’s what makes it stick. It’s not that I’m associating Mickey with “pay off the credit card” (although I’m sure a LOT of people do), but that I’m associating “Pay off the credit card” with the emotional response that is triggered when I &lt;em>see&lt;/em> Mickey.&lt;/p>
&lt;p>So I don’t know what this post is actually about. It’s either 1) How dissapointing Siri is 2) How to remember to do something by changing your Apple Watch face or 3) Why the brain is able to hold certain associations better than others. It was supposed to be #2, so let’s go with that. If you have an Apple Watch, now you know how to create a reminder without actually creating a reminder.&lt;/p></description></item><item><title>The 3 Laws of Serverless</title><link>https://burkeholland.github.io/posts/laws-of-serverless/</link><pubDate>Mon, 13 Jan 2020 16:43:32 -0600</pubDate><guid>https://burkeholland.github.io/posts/laws-of-serverless/</guid><description>&lt;p>A wise man once said this about Serverless…&lt;/p>
&lt;p>&lt;img src="https://burkeholland.github.io/media/serverless-quote.png" alt="Quote: It&amp;rsquo;s not important to understand what serverless means. It&amp;rsquo;s only important that you know the word an you are not afraid to use it in a blog post.">&lt;/p>
&lt;p>So wise! So profound. So obnoxiously vain to use your own quote.&lt;/p>
&lt;p>“Serverless”, is a buzzword. We can’t seem to agree on what it actaully means, so it ends up meaning nothing at all. Much like “cloud” or “dynamic” or “synergy”. You just wait for the right time in a meeting to drop it, walk to the board and draw a Venn Diagram, and then just sit back and wait for your well-deserved promotion.&lt;/p>
&lt;p>A lot of very smart people have &lt;em>tried&lt;/em> to define the word in a meaningful way. Here’s one that you might have seen before..&lt;/p>
&lt;blockquote>
&lt;p>Build applications without thinking about servers&lt;/p>
&lt;/blockquote>
&lt;p>I actually think this is pretty good at answering the “Wait! How can there be no server!!?!?!” question. But I think this definition falls a tad on the naive side.&lt;/p>
&lt;p>Nobody really thinks about servers when they are writing their code. I mean, I doubt any developer has ever thrown up their hands and said “Whoa, whoa, whoa. Wait just a minute. We’re not declaring any variables in this joint until I know what server we’re going to be running this on.” Or maybe you do. I have never ever done that. I always do it AFTER I’ve written the application. Come to think of it, maybe that explains a lot.&lt;/p>
&lt;p>But besides, isn’t that the whole point of a Platform as a Service (PaaS)? Don’t services like Azure and Heroku and a host of others already enable you to deploy your code without knowing anything about the physical server where it’s running? Haven’t we solved this problem?&lt;/p>
&lt;p>And if all of that is true, it seems to me that nearly everything in the cloud that is an “as a Service” product would be Serverless. Which means it would be easier to assume that everything is “Serverless” and just try to identify when something is not. I don’t even know what we could call that. Serverfull? Server as a Service? I know! VIRTUAL MACHINES.&lt;/p>
&lt;p>I don’t think you can explain Serverless in one sentence. This is because Serverless isn’t a single concept. It’s really 3 concepts that are used together to create a new type of cloud service. So don’t feel bad if your pug doesn’t get it when you try to break it down. It’s not your fault and a pug is a dog. I’m relatively sure that mine forgets nearly everything every 24 hours. Every day I tell it to get off the couch and it acts like it’s never heard this information before.&lt;/p>
&lt;p>Let’s look at the 3 properties that a technology must exhibit to be considered Serverless. These are the “Laws of Serverless”.&lt;/p>
&lt;h2 id="law-of-furthest-abstraction">Law of Furthest Abstraction&lt;/h2>
&lt;p>The “Law of Furthest Abstraction” says that you have no knowledge of the underlying system where your code runs.&lt;/p>
&lt;p>&lt;img src="https://burkeholland.github.io/media/law-furthest-abstraction.png" alt="A clipart picture of a person with the top of their head open to receive knowledge.">&lt;/p>
&lt;p>This is different from a PaaS. A PaaS hides the operating system, but you still need to know about the runtime and you still need to have some system knowledge.&lt;/p>
&lt;p>For instance, Azure’s PaaS is called “&lt;a href="https://azure.microsoft.com/try/app-service/?WT.mc_id=personal-blog-buhollan">App Service&lt;/a>”. When you create an App Service instance, you need to tell it what sort of App Service Plan you want to use. That service plan defines how much memory and CPU your instance will receive. For instance, here’s what the B (Basic) tier App Service Plans look like…&lt;/p>
&lt;p>&lt;img src="https://burkeholland.github.io/media/b-service-plans.png" alt="A listing of B tier service plans and resources granted with each one">&lt;/p>
&lt;p>This means App Service is not Serverless.&lt;/p>
&lt;p>A service in Azure that &lt;strong>is&lt;/strong> Serverless would be &lt;a href="https://docs.microsoft.com/azure/azure-functions/functions-create-first-function-vs-code?WT.mc_id=personal-blog-buhollan">Azure Functions&lt;/a>. Azure Functions has no concept of App Service Plans. You run your code in Azure Functions and it will receive all the computing power that it needs when it needs it. It’s up to Azure Functions to figure that out.&lt;/p>
&lt;p>How does that even work?!?&lt;/p>
&lt;p>It works becdause of the second law of Serverless: The Law of Inherent Scale.&lt;/p>
&lt;h2 id="the-law-of-inherent-scale">The Law of Inherent Scale&lt;/h2>
&lt;p>The Law of Inherent Scale says that scaling is an intrinsic attribute of the technology; so much so that it just happens automatically.&lt;/p>
&lt;p>&lt;img src="https://burkeholland.github.io/media/law-inherent-scale.png" alt="An icon of a column chart getting larger as it goes to the right and an arrow following along the top of the columns">&lt;/p>
&lt;p>With Azure Functions, scaling just occurs. And remember, scaling is both out and back. It’s not enough to be able to scale out, the service needs to also be able to scale back; &lt;strong>all the way to zero&lt;/strong>. That last part is important as you’ll see when we get to the third and final law.&lt;/p>
&lt;p>The way that Azure Functions accomplishes this is by adding servers as your demand spikes, and removing them as the demand subsides. This includes putting your app back on cold disk if it hasn’t been called for a period of time. It then has to rehydrate the application when the next invocation occurs.&lt;/p>
&lt;p>You can actually watch this happen in realtime by simulating some load on an Azure Functions instance. Watch the GIF below and you can see the number of servers increase as the CPU gets pegged.&lt;/p>
&lt;p>&lt;img src="https://burkeholland.github.io/media/function-scaling-demo.gif" alt="Azure App Insights showing increased traffic and the number of servers increasing as load on the server reaches 100%">.&lt;/p>
&lt;p>What about a PaaS though? Don’t most PaaS’s scale?&lt;/p>
&lt;p>Yes, They do.&lt;/p>
&lt;p>Let’s look at Azure App Service again as an example. App Service can scale out in one of two ways. One way is for you to manually add another App Service instance (B tier for example). This would not be considered “inherent scale” since it does not happen automatically.&lt;/p>
&lt;p>The second way is something called “Auto scaling”. This is where Azure will automatically add new App Service instances for you as the load increases. That &lt;strong>is&lt;/strong> inherent scale. However, you have to scale in chunks - or rather by adding full App Service Plan instances. In other words, you have to add another full B instance to scale out, even if you don’t need the entire amount of that compute. This means that you are paying for compute whether you use it or not. This brings us to the third and final Serverless Law - the “Law of Least Consumption”.&lt;/p>
&lt;h2 id="law-of-least-consumption">Law of Least Consumption&lt;/h2>
&lt;p>The Law of Least Consumption says that you only pay for what you use. Coincidentally, this also everyone’s most favorite law. Money talks. But it doesn’t buy happiness. But it does buy jetski’s and I’ve never seen an unhappy person on a jetski.&lt;/p>
&lt;p>&lt;img src="https://burkeholland.github.io/media/law-least-consumption.png" alt="An icon of a water faucet with the water running">.&lt;/p>
&lt;p>Think about it like this: in your house, or your parents house, or apartment or wherever you happen to live, you probably have running water. But that water doesn’t run all the time. It only runs when you need it. You turn the faucet on to get water, and off when you aren’t using it. By the way, you can now get a faucet that is &lt;a href="https://www.cnet.com/news/delta-to-make-faucets-that-work-with-amazon-alexa/">controlled by Alexa&lt;/a>. Which is just what we need - robots in charge of the water supply.&lt;/p>
&lt;p>Azure Functions is like a water faucet for compute. You only get charged for what you use. That occurs in a few different ways…&lt;/p>
&lt;ol>
&lt;li>&lt;strong>Code storage&lt;/strong> - you pay for the disk space that your code actually occupies on the server&lt;/li>
&lt;li>&lt;strong>Executions&lt;/strong> - you pay per execution of your function&lt;/li>
&lt;li>&lt;strong>Execution time&lt;/strong> - you pay for the amount of compute that your function uses.&lt;/li>
&lt;/ol>
&lt;p>You also receive 1 million free executions a month. That combined with the miniscule cost of storage means that if your Azure Functions don’t get called, you don’t pay anything. This makes a lot of a sense as a customer. Just think of all the compute that we have paid for and wasted all these years! You could be retired already! But probably not because you’d blow all that extra money on jetski’s.&lt;/p>
&lt;p>The cloud can (and should) save us money by being able to target compute by need and not just allocating it in “use it or lose it” buckets.&lt;/p>
&lt;h2 id="applying-the-serverless-laws">Applying the Serverless Laws&lt;/h2>
&lt;p>Now that I have established an irrefutable framework to determine if something is Serverless, we can apply these laws to any technology to determine if it is or is NOT Serverless.&lt;/p>
&lt;h3 id="azure-services-that-are-serverless">Azure Services that are Serverless&lt;/h3>
&lt;ul>
&lt;li>&lt;a href="https://docs.microsoft.com/en-us/azure/javascript/tutorial-vscode-static-website-node-01">Azure Static Sites&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://azure.microsoft.com/free/serverless/?WT.mc_id=personal-blog-buhollan">Logic Apps&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://docs.microsoft.com/azure/cosmos-db/introduction?WT.mc_id=personal-blog-buhollan">Cosmos DB&lt;/a>
&lt;ul>
&lt;li>Note - Cosmos DB isn’t quite Serverless just yet, but it’s close. It conforms to law 1, but up until recently, you’ve had to buy database bandwidth in chunks which means it did not conform to laws 2 and 3. However, as of Ignite, the team announced “Auto Pilot”. This is a feature which automatically adds throughput as the load requires it, but you still have to pay for a basic allocation. Once Cosmos DB allows you to start from absolute zero, it will comply with all 3 laws and can be considered “Serverless”.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="https://docs.microsoft.com/azure/sql-database/sql-database-serverless?WT.mc_id=personal-blog-buhollan">SQL Server&lt;/a>
&lt;ul>
&lt;li>Believe it or not, SQL Server has a “Serverless” offering.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;p>The next time someone casually throws out a “Serverless”, see if satisfies the 3 Laws of Serverless. If it does, you can save yourself a “well, actually”. If it doesn’t, just nod and smile. And try to pay attention to the Venn Diagram.&lt;/p></description></item><item><title>GSAP, Webpack and invalid tweens</title><link>https://burkeholland.github.io/posts/invalid-tween/</link><pubDate>Wed, 27 Nov 2019 16:51:54 -0600</pubDate><guid>https://burkeholland.github.io/posts/invalid-tween/</guid><description>&lt;p>Before I forget, I wanted to document for posterity how I lost about 4 hours yesterday to gsap/webpack issue.&lt;/p>
&lt;p>I was working on a Vue project (CLI) with some gsap powered animations that I did not write. Not having written them, I can confess that I have no idea what they are or what they do. Any time I see the word “Tween”, I get flashbacks to actual &lt;em>Flash&lt;/em> timelines and this very visceral feeling that I do not know, nor will I ever, know what I’m doing.&lt;/p>
&lt;p>The application ran fine in development mode. But when I built the thing (&lt;code>npm run build&lt;/code>) and deployed it, none of the animations worked. Because why would something ever work on your machine AND when you deploy it? That wouldn’t be software development at all. That would be cooking. Or carpentry. But the first rule of software development is that it only works for you. This is either because software is hard, or because god hates you.&lt;/p>
&lt;p>Either way, here’s the error you googled for…&lt;/p>
&lt;pre>&lt;code>Invalid visibility tween of visible Missing plugin? gsap.registerPlugin()
&lt;/code>&lt;/pre>
&lt;p>First off, is it just me or is this error message missing some punctuation? Should there be a period after “visible”? Also, “invalid visibility tween of visible”? That’s the most circular 5 words I have ever read. Even now I’m not quite sure what they are trying to say in this error. The last part is kind of helpful - &lt;code>gsap.registerPlugin()&lt;/code>. OK, so it thinks I need to register a plugin to change the visibility of things. Except that there is no plugin in gsap to do that. Like I said, I have no idea what I’m doing, but if the line to animate the visibility looks like this..&lt;/p>
&lt;pre>&lt;code>mounted() {
TweenMax.set(&amp;quot;#thisisfine&amp;quot;, {
visibility: &amp;quot;visible&amp;quot;
});
}
&lt;/code>&lt;/pre>
&lt;p>Where, exactly, is the visibility plugin? And isn’t that something that gsap should just do in it’s base library? If TweenMax can’t change the visibility of something without a plugin, what good is it for?&lt;/p>
&lt;p>This one really stumped me. I noticed that not only visibility, but every single animation in the app was broken. All kinds of errors, all of them roughly the same…&lt;/p>
&lt;pre>&lt;code>Invalid filter tween of none Missing plugin? gsap.registerPlugin()
Invalid fill tween of hsl(+=0%, -=100%, +=0%) Missing plugin? gsap.registerPlugin()
Invalid y tween of -28 Missing plugin? gsap.registerPlugin()
Invalid rotation tween of 10 Missing plugin? gsap.registerPlugin()
Invalid transformOrigin tween of 50% 50% Missing plugin? gsap.registerPlugin()
&lt;/code>&lt;/pre>
&lt;p>Again, all of this works in development.&lt;/p>
&lt;p>I did a lot of Googling on this issue and read a lot of forum posts I didn’t understand. What’s relatively clear here is that somehow, in a production build, Webpack is not including all of the necessary parts of gsap to make this work. It includes them in the development bundle, but not the production one.&lt;/p>
&lt;p>I eventually found &lt;a href="https://greensock.com/forums/topic/21298-premium-plugins-vue-npm-run-build/">this forum post&lt;/a> on the gsap forums about Webpack shaking gsap plugins out during the tree-shaking part of the build process. This happens if you aren’t referencing the plugins anywhere in your code. The suggested fix is to explicitly include the plugin in your code so that Webpack knows that you are in fact going to use it.&lt;/p>
&lt;pre>&lt;code>import MorphSVGPlugin from &amp;quot;gsap/src/uncompressed/plugins/MorphSVGPlugin&amp;quot;;
// You need to reference the plugin somewhere in your code
const plugins = [MorphSVGPlugin];
&lt;/code>&lt;/pre>
&lt;p>But as we already saw, I don’t have that problem. The code I’m working with is importing &lt;code>TweenMax&lt;/code> and using &lt;code>TweenMax&lt;/code>. WebPack should be including that. If we look a the import for gsap, you can see that VS Code does see a “visibility” property on the gsap import.&lt;/p>
&lt;p>&lt;img src="https://burkeholland.github.io/media/vs-code-gsap.png" alt="visibility property on gsap object in VS Code">&lt;/p>
&lt;p>On a hunch, I imported &lt;code>visibility&lt;/code> and then included it as per the forum post.&lt;/p>
&lt;pre>&lt;code>import { TimelineMax, TweenMax, Circ, visibility } from &amp;quot;gsap&amp;quot;;
const plugins = [visibility];
&lt;/code>&lt;/pre>
&lt;p>And, SUCCESS! But not just for the visibility animation, for ALL of them. All of the animations now work.&lt;/p>
&lt;p>I’m not sure why this is. It’s like whatever code allows gsap to animate visibility allows it to do everything else. So including that one property includes what we actually want, which is a functioning gsap.&lt;/p>
&lt;p>In any event, hopefully this post is a quick Google search away and you didn’t have to spend 4 hours on it like I did.&lt;/p></description></item><item><title>Selecting the first item from an array</title><link>https://burkeholland.github.io/posts/select-one-javascript/</link><pubDate>Sun, 17 Nov 2019 17:00:11 -0600</pubDate><guid>https://burkeholland.github.io/posts/select-one-javascript/</guid><description>&lt;p>Sometimes, in life, you just want one of something. Not two. Never two. Just one. Like a toothbrush. Or a flu shot. Or a pug. Dear god, trust me, you do not want more than one pug. It’s like a choir of snoring with flatulance on backup vocals.&lt;/p>
&lt;p>This is common in database queries, too. I mean, the desire to just get one result. Not the flatulance. Although it &lt;em>might&lt;/em> be. I’ve got no data on that and writing queries can be super stressful.&lt;/p>
&lt;p>Applications that act as a form over some sort of data often require the retreiving of just one item so that you can edit that item. Which, according to science, is like 110% of all applications ever.&lt;/p>
&lt;p>I recently built a small application with &lt;a href="https://www.npmjs.com/package/@azure/cosmos">Cosmos DB&lt;/a>, and I quickly ran into a situation where I needed to select one item. Specifically, I have a database structure that looks like this…&lt;/p>
&lt;pre>&lt;code>{
productId: 1,
productName: &amp;quot;Hammer&amp;quot;,
productDescription: &amp;quot;a tool consisting of a weighted \&amp;quot;head\&amp;quot; fixed to a long handle that is swung to deliver a swift and brutal impact to the thumb.&amp;quot;
brand: {
brandId: 10,
brandName: &amp;quot;Acme&amp;quot;,
}
}
&lt;/code>&lt;/pre>
&lt;p>If we wanted to get just the Acme thumb smash…..er…..hammer, then we could write a select statement that looks like the following…&lt;/p>
&lt;pre>&lt;code>SELECT *
FROM products p
WHERE p.name = &amp;quot;Hammer&amp;quot; AND p.brand.name = &amp;quot;Acme&amp;quot;
&lt;/code>&lt;/pre>
&lt;p>Executing this query in Cosmos DB looks something like this…&lt;/p>
&lt;pre>&lt;code>async function getProduct(productName: string, brandName: string) {
const query = `SELECT TOP 1 *
FROM products p
WHERE p.productName = &amp;quot;${productName}&amp;quot;
AND p.brand.brandName = &amp;quot;${brandName}&amp;quot;`;
const result = await collection.items.query(query).fetchNext();
return result.resources[0];
}
getProduct(&amp;quot;Hammer&amp;quot;, &amp;quot;Acme&amp;quot;).then(product =&amp;gt; {
console.log(JSON.stringify(product));
});
&lt;/code>&lt;/pre>
&lt;blockquote>
&lt;p>Note that “SELECT Top 1 _” is preferred over “SELECT _” so you don’t return more data than you intend. And “SELECT p.ANYTHING_AT_ALL” is preferrable to “SELECT *” because your document structure may not always be the same in a NoSQL database because that’s the world we live in now.&lt;/p>
&lt;/blockquote>
&lt;p>Assuming that the brand name and product name together constitute a unique key, we should only ever get one result back. The Cosmos DB JavaScript SDK always returns an array for queries, even if there is only one item inside. To get that item, we can just grab the zero-index item from the &lt;code>resources&lt;/code> object, which is what’s going on in that gorgeous code block above composed by yours truly.&lt;/p>
&lt;p>The problem is that this returns &lt;code>undefined&lt;/code> if there is no result. We could check for that and return en empty object easily enough…&lt;/p>
&lt;pre>&lt;code>return result.resources[0] || {};
&lt;/code>&lt;/pre>
&lt;p>But…”yuck”. I don’t know what it is about array notation, but it always feels like I’m doing it wrong. Like I’m cheating by using the array index. I think this is because I’m explicitly asking for something that, much like god, may or may not exist. If it does exist, everything is fine. If it doesn’t, the only way to find out is the hard way.&lt;/p>
&lt;p>Array notation isn’t bad per say, but I generally try and stay away from it because it’s the best way to smash your face on “undefined is not a function” if you use it with objects.&lt;/p>
&lt;p>To feel less dirty, we could instead use the array “shift” method. This gives us the first object in the array or &lt;code>undefined&lt;/code>.&lt;/p>
&lt;pre>&lt;code>return result.resources.shift() || {};
&lt;/code>&lt;/pre>
&lt;p>But that also alters the original array, which we might not want. Like if we were going to use that same response again for another operation. I know you think you won’t. You always think you won’t. But then, eventually, you do and by the time you do you’ve forgotten all about this whole scenario because at least a year has passed, you’ve had a child, you’ve moved twice because you don’t get along with your neighbors and your wife has acquired two pugs.&lt;/p>
&lt;p>It’s generally not a good idea to go around modifying collections unless you specifically want to do that. Insert esoteric HN article about immutability.&lt;/p>
&lt;p>Instead we could use &lt;code>find&lt;/code>, which will leave the original &lt;code>resources&lt;/code> array intact…&lt;/p>
&lt;pre>&lt;code>return result.resources.find(x =&amp;gt; x) || {};
&lt;/code>&lt;/pre>
&lt;p>Cosmos DB enginner and JavaScript trickster &lt;a href="https://twitter.com/southpolesteve">Steve Faulkner&lt;/a> pointed out that you could also just destructure the array. But we can’t do that in a return statement for reasons that the JavaScript gods have not seen fit to reveal. So we would need two lines. Also, we can’t do a default value on the destructuring, so we would have to do it on the return.&lt;/p>
&lt;pre>&lt;code>const [item] = result.resources;
return item || {};
&lt;/code>&lt;/pre>
&lt;p>He also pointed out to me that the common denominator in all my failed neighbor relationships might be me.&lt;/p>
&lt;p>At this point, we just have to ask, “Which of these is best”? We don’t have to ask that, but we probably should given this is a blog post and it needs a conclusion.&lt;/p>
&lt;p>In my opinion, as much as I hate to admit it, it’s the line we started with. While array notation might seem dirty, in this instance, it simply makes the most sense and most clearly articulates what the code does.&lt;/p>
&lt;pre>&lt;code>return result.resources[0] || {};
&lt;/code>&lt;/pre>
&lt;p>It’s also not a problem to use array notation here because we are in fact working with an array. The whole reason I was trying to avoid that situation in the first place is because I was looking for a solution to a problem that JavaScript just doesn’t have.&lt;/p>
&lt;h2 id="a-solution-without-a-problem">A solution without a problem&lt;/h2>
&lt;p>If you have used C# before, you will be familiar with LINQ. You will also be very familiar with LINQ’s &lt;code>firstOrDefault&lt;/code> or &lt;code>singleOrDefault&lt;/code> methods. These methods return either the first result from the query, or an empty object of the query return type. LINQ doesn’t exist for JavaScript (that’s a &lt;a href="https://github.com/mihaifm/linq">lie&lt;/a>) and there is a reason for that: We don’t need it.&lt;/p>
&lt;p>The &lt;code>firstOrDefault&lt;/code> and &lt;code>singleOrDefault&lt;/code> methods are needed for C# because it is a typed language. You can’t just return an object. You either have to get a result, or you need to get a null object of a certain type. In JavaScript, we don’t care about types (very much). So it’s easy enough for us to check and see if something is simply there and then return an empty object if it is not. We don’t even have to do that much. We can just use the result type later in our code if it’s defined at all.&lt;/p>
&lt;pre>&lt;code>const product = await db.getProduct(&amp;quot;Hammer&amp;quot;, &amp;quot;Acme&amp;quot;);
if (product) {
product.description = ...
}
else {
console.log(&amp;quot;Unable to find a(n) %s %s&amp;quot;, &amp;quot;Acme&amp;quot;, &amp;quot;Hammer&amp;quot;);
}
&lt;/code>&lt;/pre>
&lt;p>The moral of this story is that sometimes your first instinct is the right one. Or, it’s not. Either way, you won’t know until you write a blog post.&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://docs.microsoft.com/en-us/azure/cosmos-db/create-sql-api-nodejs">Connect to and query data from Azure Cosmos DB&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://ardalis.com/javascript-es6-linq-equivalents">Nifty article from Steve Smith on mapping JavaScript array methods to LINQ methods&lt;/a>&lt;/li>
&lt;/ul></description></item><item><title>Deploying a Nuxt App to Azure</title><link>https://burkeholland.github.io/posts/thank-you-nuxt/</link><pubDate>Wed, 05 Jun 2019 17:04:42 -0600</pubDate><guid>https://burkeholland.github.io/posts/thank-you-nuxt/</guid><description>&lt;summary>Summary: Nuxt apps with “server-side rendering” require a Node server, so you need to deploy them to Azure App Service. If you are using Nuxt apps in SPA mode, you can (and should) deploy them to Azure Storage.
&lt;p>Check out the links below for more details…&lt;/p>
&lt;figure>&lt;img class="azure-icon" src="https://burkeholland.github.io/media/Icon-compute-35-App-Services.svg" />&lt;a href="https://code.visualstudio.com/tutorials/app-service-extension/getting-started?WT.mc_id=personal-blog-buhollan">Deploy to Azure App Service&lt;/a>&lt;/figure>
&lt;figure>&lt;img class="azure-icon" src="https://burkeholland.github.io/media/Icon-storage-86-Storage-Accounts.svg"/>&lt;a href="https://code.visualstudio.com/tutorials/static-website/getting-started?WT.mc_id=personal-blog-buhollan">Deploy a static website to Azure&lt;/a>&lt;/figure>
&lt;/summary>
&lt;p>&lt;/p>
&lt;p>Ariana Grande once said, “One taught me patience. And one taught me pain”. She was talking about her ex’s. I’m here today to talk to you about Nuxt’s.&lt;/p>
&lt;p>Nuxt’s? Nuxt’is? Nuxt’ises?&lt;/p>
&lt;h2 id="what-is-nuxtanyway">What is Nuxt anyway?&lt;/h2>
&lt;p>&lt;a href="https://nuxtjs.org/">Nuxt&lt;/a> is “the VueJS framework”. That’s what it says on their website and why would they lie.&lt;/p>
&lt;p>It’s kinda hard to nail down exactly what Nuxt does, because it does so much. It will automatically setup routing based on your folder structure. It will automatically do code splitting for static sites. It will automatically cause someone to write a blog post with a few too many uses of the word “automatically:“.&lt;/p>
&lt;p>But it’s probably best known as the way that you do server-side rendering with Vue.&lt;/p>
&lt;h2 id="server-side-vue">Server-side Vue&lt;/h2>
&lt;p>Vue is a JavaScript framework. Which means that the code you write is executed in the browser at runtime. But a few years ago, someone smart realized that we can execute JavaScript on the server with Node, so we should be able to run and compile JavaScript frameworks on the server. And they called it, “Isomorphic JavaScript”.&lt;/p>
&lt;p>I still don’t know what that means. Fortunately, it was renamed to “Universal JavaScript”. Vue’s primary value proposition is that it enables developers to build these “Universal Applications”. It does a lot more than that, but that’s primarily what it’s known for. Kind of like John Krasinski is Jack Ryan, but in a much more real sense, he is and always will be &lt;a href="https://en.wikipedia.org/wiki/Jim_Halpert">Jim Halpert&lt;/a>.&lt;/p>
&lt;p>It’s hard to understand Universal JavaScript without seeing something in action, so let’s build something pointless.&lt;/p>
&lt;h2 id="a-pointless-demo">A pointless demo&lt;/h2>
&lt;p>My sample app is a single page with one XMLHTTPRequest (XHR) which pulls some fake images in from the JSON placeholder API. I was expecting better fake images than this, but I suppose you can’t complain about free. Like when my sister-in-law rented a margarita machine and then made them too weak. “Listen, thanks for the free alcohol, but I am disappointed.”&lt;/p>
&lt;p>&lt;img src="https://cdn-images-1.medium.com/max/1600/0*7gaMmL0HlfVX9vZf.png" alt="">&lt;/p>
&lt;p>Here’s the entirety of the code used to make this page.&lt;/p>
&lt;pre>&lt;code>&amp;lt;template&amp;gt;
&amp;lt;div class=&amp;quot;section&amp;quot;&amp;gt;
&amp;lt;h1 class=&amp;quot;is-size-1&amp;quot;&amp;gt;Photos&amp;lt;/h1&amp;gt;
&amp;lt;div class=&amp;quot;columns is-multiline&amp;quot;&amp;gt;
&amp;lt;div
v-for=&amp;quot;photo in photos&amp;quot;
:key=&amp;quot;photo.id&amp;quot;
class=&amp;quot;column is-one-quarter&amp;quot;&amp;gt;
&amp;lt;div class=&amp;quot;card photo&amp;quot;&amp;gt;
&amp;lt;div class=&amp;quot;card-image&amp;quot;&amp;gt;
&amp;lt;figure class=&amp;quot;image&amp;quot;&amp;gt;
&amp;lt;img :src=&amp;quot;photo.url&amp;quot; alt=&amp;quot;photo.title&amp;quot; /&amp;gt;
&amp;lt;/figure&amp;gt;
&amp;lt;/div&amp;gt;
&amp;lt;div class=&amp;quot;card-content&amp;quot;&amp;gt;
&amp;lt;div class=&amp;quot;content&amp;quot;&amp;gt;
&amp;lt;p&amp;gt;{{ photo.title }}&amp;lt;/p&amp;gt;
&amp;lt;/div&amp;gt;
&amp;lt;/div&amp;gt;
&amp;lt;/div&amp;gt;
&amp;lt;/div&amp;gt;
&amp;lt;/div&amp;gt;
&amp;lt;/div&amp;gt;
&amp;lt;/template&amp;gt;
&amp;lt;script&amp;gt;
export default {
async asyncData({ $axios }) {
const { data } = await $axios.get(
'https://jsonplaceholder.typicode.com/photos?_limit=100'
)
return { photos: data }
}
}
&amp;lt;/script&amp;gt;
&amp;lt;style&amp;gt;
.card.photo {
height: 100%;
}
&amp;lt;/style&amp;gt;
&lt;/code>&lt;/pre>
&lt;p>Not super exciting, but enough to test out Nuxt’s value proposition of rendering apps on the server. On line 29 there is an HTTP call to the endpoint made with axios. Even though this code is in the component, Nuxt is going to make that call and compile this template on the server. So the page we get will already have all of the markup in it.&lt;/p>
&lt;p>But how do we know for sure that Nuxt is actually doing this? What if it’s just lying to us? How can I ever trust anyone again after &lt;a href="https://www.theregister.co.uk/2016/03/23/npm_left_pad_chaos/">left-pad&lt;/a>?&lt;/p>
&lt;p>The easiest way is to just right-click the page and “View Source”. View Source shows you what the page looks like when it was requested from the server. That is before any JavaScript has a chance to mutilate it. I mean mutate it.&lt;/p>
&lt;p>&lt;img src="https://miro.medium.com/max/2784/0*quP9zI62tcajdDpr.png" alt="">&lt;/p>
&lt;p>Yep - all of the markup is definitely there. And it ain’t pretty either. But that’s OK because it’s minified or something. And smaller is always better on the web. &lt;a href="https://css-tricks.com/how-to-increase-your-page-size-by-1500-with-webpack-and-vue/">OR IS IT&lt;/a>.&lt;/p>
&lt;p>You can also open the dev tools and just look for an XHR. It will be conspicuously absent.&lt;/p>
&lt;p>&lt;img src="https://miro.medium.com/max/2784/0*FVNiYW--Kj67z5PS.png" alt="">&lt;/p>
&lt;p>I didn’t have too much trouble getting this far. Nuxt is….different than a standard Vue application, but it’s not a brick to teeth. It’s relatively easy to just scaffold out a new app and then read the first paragraph of the “Getting Started” page and assume that you know everything already.&lt;/p>
&lt;p>Then I went to deploy it.&lt;/p>
&lt;h2 id="deploying-nuxtapps">Deploying Nuxt apps&lt;/h2>
&lt;p>Since Nuxt is rendering things on the server, Nuxt apps require a server. A node server to put too fine a point on it. I’m using Azure, so that means &lt;a href="https://code.visualstudio.com/tutorials/app-service-extension/getting-started?WT.mc_id=personal-blog-buhollan">AppService&lt;/a>. Vue apps that are single-page applications can be hosted on &lt;a href="https://code.visualstudio.com/tutorials/static-website/getting-started?WT.mc_id=personal-blog-buhollan">Azure Storage&lt;/a>.&lt;/p>
&lt;p>Before the app can be run, it has to be built. Ideally, we want this to happen on the server. The preferred workflow is…&lt;/p>
&lt;ul>
&lt;li>Make a change&lt;/li>
&lt;li>Check into Github&lt;/li>
&lt;li>Azure pulls in code automatically&lt;/li>
&lt;li>Azure performs build&lt;/li>
&lt;li>Azure starts the site&lt;/li>
&lt;/ul>
&lt;p>This workflow lets you focus on writing code, not deploying things. You just check them into source control and your site is magically updated. This is kind of like the simplest possible form of DevOps.&lt;/p>
&lt;p>To set up a workflow like this in Azure, I need to first decide if I’m more of a Windows guy, or more of a Linux guy. Azure supports both operating systems, and the one that you choose matters a whole lot. Just wait.&lt;/p>
&lt;p>Let’s start with Linux. It’s important that we start with Linux because Linux is the preferred way to run Node applications in Azure. I bolded that statement because it’s important. It means that the effort to improve the Node experience in Azure is focused around Linux.&lt;/p>
&lt;h2 id="deploying-tolinux">Deploying to Linux&lt;/h2>
&lt;p>Running a Nuxt application on AppService for Linux “just works” thanks to a new build tool in Azure called “Oryx”. In fact, Oryx just rolled out this month. Welcome to the world, Oryx! Sorry about 2019.&lt;/p>
&lt;p>&lt;img src="https://miro.medium.com/max/2600/0*FsNsKCMuU_6r6Tfe.png" alt="">&lt;/p>
&lt;p>All it takes to deploy and build this thing on Azure, is to configure the site for Git or GitHub deployment and check the project into the repo.&lt;/p>
&lt;p>&lt;img src="https://miro.medium.com/max/1392/0*cDgYe1sVFNHR13Zm.png" alt="">&lt;/p>
&lt;p>Oryx will pull in the code, run an npm install and then execute npm run build. The Git logs will show that a Nuxt build did occur.&lt;/p>
&lt;p>&lt;img src="https://miro.medium.com/max/2600/0*ey-IoljeCrcp32l1.png" alt="">&lt;/p>
&lt;p>Browse to the site and…&lt;/p>
&lt;p>&lt;img src="https://miro.medium.com/max/2600/0*lyVy7wWpY044J3dx.png" alt="">&lt;/p>
&lt;p>It takes a LONG time for Azure to return this error and I’ve been working with Azure long enough to know that when this happens, it’s probably because Azure cannot bind to a port or address. That happens if the app is trying to bind to some hard-coded address (like localhost) or some hard-coded port (like 3000).&lt;/p>
&lt;p>A lot of hosting providers have this issue. This included sites on Heroku and anywhere else that uses containers to host apps like Azure does. To fix it, the Nuxt docs say to include a section in the nuxt.config.js that binds to 0.0.0.0.&lt;/p>
&lt;pre>&lt;code>server: {
host: '0.0.0.0'
}
&lt;/code>&lt;/pre>
&lt;p>And…&lt;/p>
&lt;p>&lt;img src="https://miro.medium.com/max/2600/0*fFFcsLVb3AdMJJNO.png" alt="">&lt;/p>
&lt;p>Excellent! Not too bad. The host setting is really the only thing that might trip you up here.&lt;/p>
&lt;p>&lt;strong>Bonus tip&lt;/strong>: you can speed up the whole build process quite a bit by using yarn instead of npm. Azure caches the top yarn modules so yarn install is going to be enormously faster than npm install.&lt;/p>
&lt;p>That’s Linux. Now let’s talk about Windows.&lt;/p>
&lt;h2 id="deploying-towindows">Deploying To Windows&lt;/h2>
&lt;p>Deploying to Windows is quite a bit more….interesting. There is no Oryx build tool for Windows. Instead, you get something called “Kudu”.&lt;/p>
&lt;p>By default, Kudu doesn’t build anything. You have to include a .deployment file with the right setting to get it to perform a build. That just happens to be the SCM_DO_BUILD_DURING_DEPLOYMENT setting.&lt;/p>
&lt;pre>&lt;code>[config]
SCM_DO_BUILD_DURING_DEPLOYMENT=true
&lt;/code>&lt;/pre>
&lt;p>The problem is that your definition of a build and Kudu’s definition of a build are probably not the same. When I say build, I mean npm install and then npm run build. Kudu’s definition stops at npm install. But since Kudu is already running an npm install, we can trick it into also running the build command by just making it a postinstall hook.&lt;/p>
&lt;pre>&lt;code>&amp;quot;postinstall&amp;quot;: &amp;quot;npm run build&amp;quot;
&lt;/code>&lt;/pre>
&lt;p>It works! Wait. Kind of.&lt;/p>
&lt;p>&lt;img src="https://miro.medium.com/max/1392/0*9ySqMlUopJGE9oJI.png" alt="">&lt;/p>
&lt;p>Well, it worked in so much as Kudu did run the postinstall hook, but the build fails. And it fails because function is an unexpected token. Anytime you see “unexpected token” as an error, the problem is likely because your Node version is wrong. I scrolled back up through the logs and saw this…&lt;/p>
&lt;p>&lt;img src="https://miro.medium.com/max/1392/0*_uED5o2xWwhIL83N.png" alt="">&lt;/p>
&lt;p>My guess is Node 6.9.1 doesn’t support async functions.&lt;/p>
&lt;p>&lt;img src="https://miro.medium.com/max/1392/0*whhi1gg9RW2I-iHd.png" alt="">&lt;/p>
&lt;p>Nope. Looks like version 7.10.1 is the minimum for that. To stay safe, let’s choose the highest supported version of Node in Azure, which at the time of this writing, is 10.15.2. The most reliable way to set the &lt;code>WEBSITE_DEFAULT_NODE_VERSION&lt;/code> in Azure is to do it via an App Setting.&lt;/p>
&lt;p>&lt;img src="https://miro.medium.com/max/1392/0*Pnf75E2ErbA9rKCX.png" alt="">&lt;/p>
&lt;p>SUCCESS!&lt;/p>
&lt;p>&lt;img src="https://miro.medium.com/max/1392/0*OMHwK7RnSCs6BRO0.png" alt="">&lt;/p>
&lt;p>Now we’ll just browse to the site….&lt;/p>
&lt;p>&lt;img src="https://miro.medium.com/max/1392/0*omyORxUG6LZq6tI3.png" alt="">&lt;/p>
&lt;p>What’s the word when something should work, but it doesn’t work and you don’t know why? Oh yeah, “programming”.&lt;/p>
&lt;p>Scrolling back up through the output reveals this…&lt;/p>
&lt;p>&lt;img src="https://miro.medium.com/max/1392/0*CW88bWnlqBMRU3wQ.png" alt="">&lt;/p>
&lt;p>Well, it’s not an invalid startup command, but Kudu is expecting something in the format of node entry-point. There is an interesting line below that one that says…&lt;/p>
&lt;p>“Missing server.js/app.js files, web.config is not generated”&lt;/p>
&lt;p>What’s happening here is Windows uses IISNode to run the application. IISNode requires a web.config to set the entry point and root directory. If you have an app.js or serverjs file in the root of your app, Kudu will use that file to automatically generate a web.config.&lt;/p>
&lt;p>So I added a server.js file to the root of my project that just required in my actual startup file.&lt;/p>
&lt;pre>&lt;code>require('./server/index.js');
&lt;/code>&lt;/pre>
&lt;p>Redeploy and…&lt;/p>
&lt;p>&lt;img src="https://miro.medium.com/max/1392/0*bWHIKki05mhHVZXV.png" alt="">&lt;/p>
&lt;p>Not terrible, but not terribly intuitive either. You don’t know what you don’t know. And if you didn’t know, now you know.&lt;/p>
&lt;h2 id="look-what-you-taughtme">Look what you taught me&lt;/h2>
&lt;p>I’ll be honest, figuring out the Windows part of this thing was no fun. Patience and pain. That said, I do feel like I understand Azure AppService for Windows way more than I ever thought that I would. At least enough to write a blog post.&lt;/p>
&lt;p>Oryx is new, and it’s a much-welcomed improvement. It works the way that I would expect it to, which is kinda all we’re really asking for as developers. It’s like the Dyson guy used to say…&lt;/p>
&lt;blockquote>
&lt;div>I just think that things should work&lt;/div>
&lt;p>&lt;cite>-The Dyson Vacuum Cleaner Guy&lt;/cite>&lt;/p>
&lt;/blockquote>
&lt;p>&lt;a href="https://github.com/burkeholland/nuxt-appservice-windows">Sample application from this article&lt;/a>&lt;/p></description></item><item><title>This is how to easily deploy a static site to Azure</title><link>https://burkeholland.github.io/posts/static-site-azure/</link><pubDate>Thu, 30 May 2019 08:36:49 -0600</pubDate><guid>https://burkeholland.github.io/posts/static-site-azure/</guid><description>&lt;p>Over the weekend I bought my first new vehicle ever: A red moped. That was the only thing available at my price point.&lt;/p>
&lt;p>&lt;img src="https://miro.medium.com/max/1000/1*igNXrT_-JvgxJSeJ745Owg.jpeg" alt="">&lt;/p>
&lt;p>What a glorious thing it is! The wind whips over your body at a stunning 35 mph and you are alone with your thoughts. You ponder the finer points of the universe: existential questions like, “Do I look stupid on this thing”, “How many bugs can you eat before you die” and “How many ways can I deploy a static site to Azure”?&lt;/p>
&lt;h2 id="whats-a-static-site-moped-boy">What’s a static site, moped boy?&lt;/h2>
&lt;p>Good question. But can we not call me “moped boy”? I mean it’s got 150 CC’s. I can do like 55. Downhill with the wind.&lt;/p>
&lt;p>Frameworks like PHP, ASP.NET and Django assemble pages on the fly. When a site is requested, the server performs some queries or operations, assembles the markup and sends a “page” back to you.&lt;/p>
&lt;p>&lt;img src="https://miro.medium.com/max/600/1*69aS6OhjDU3RBeSRqXiaFA.png" alt="">&lt;/p>
&lt;p>A “static site”, is any site that is not using a server-side framework. It is just HTML, CSS and JavaScript. These days most static sites are some form of single page application built with Angular, React or Vue (alphabetical order, breathe deeply). I think I’m supposed to include Svelte in that list now too.&lt;/p>
&lt;p>&lt;img src="https://miro.medium.com/max/600/1*sar590LUigydRl6LkIqU7Q.png" alt="">&lt;/p>
&lt;p>I’m not sure why I drew my servers in such a bad mood. I think it’s because that’s how I would feel if I was a server. Thankless job. Nobody cares until you go down and then everyone is mad you.&lt;/p>
&lt;p>“So this article is about how to host an index.html file? Really?”.&lt;/p>
&lt;p>NO. I mean, kind of. Actually, yes.&lt;/p>
&lt;h2 id="azure-storage">Azure Storage&lt;/h2>
&lt;p>&lt;a href="https://docs.microsoft.com/en-us/azure/storage/blobs/storage-blob-static-website?WT.mc_id=personal-medium-buhollan">Azure Storage&lt;/a> is specifically designed to serve files as quickly as possible. Static sites are just files. And because God loves you and wants you to be happy, there is VS Code. And because Microsoft loves you, there is an &lt;a href="https://marketplace.visualstudio.com/items?itemName=ms-azuretools.vscode-azurestorage&amp;amp;WT.mc_id=personal-medium-buhollan">Azure Storage extension&lt;/a>.&lt;/p>
&lt;p>Once it’s installed, you create a storage account. That’s pretty straightforward and quick. Short enough to fit in this GIF.&lt;/p>
&lt;p>&lt;img src="https://miro.medium.com/max/1280/1*Py8u-X-STzMXvL_YKOE1Iw.gif" alt="">&lt;/p>
&lt;p>&lt;a href="https://twitter.com/jeffhollan">Jeff Hollan&lt;/a> from the Azure Functions team had a cool tweet the other day about naming temporary Resource Groups with “deleteme” and then having a PowerShell function that deletes them every day. This way you can play around and not end up with a bill you weren’t expecting.&lt;/p>
&lt;div class="twitter-tweet twitter-tweet-rendered" style="display: flex; max-width: 550px; width: 100%; margin-top: 10px; margin-bottom: 10px;">&lt;iframe id="twitter-widget-0" scrolling="no" frameborder="0" allowtransparency="true" allowfullscreen="true" class="" style="position: static; visibility: visible; width: 550px; height: 580px; display: block; flex-grow: 1;" title="Twitter Tweet" src="https://platform.twitter.com/embed/index.html?dnt=false&amp;amp;embedId=twitter-widget-0&amp;amp;frame=false&amp;amp;hideCard=false&amp;amp;hideThread=false&amp;amp;id=1132774507821748224&amp;amp;lang=en&amp;amp;origin=https%3A%2F%2Fburkeholland.github.io%2Fposts%2Fstatic-site-azure%2F&amp;amp;theme=light&amp;amp;widgetsVersion=ed20a2b%3A1601588405575&amp;amp;width=550px" data-tweet-id="1132774507821748224">&lt;/iframe>&lt;/div>
&lt;p>The account will get created and show up in the sidebar under the Storage Extension.&lt;/p>
&lt;p>&lt;img src="https://miro.medium.com/max/1392/1*6IXOSL6kZcJ3GMizLC3u7g.png" alt="">&lt;/p>
&lt;p>Azure Storage is for serving files, so we need to tell it that we want it to serve our files like a web server. To do that, open the Command Palette and select “Configure static website”.&lt;/p>
&lt;p>&lt;img src="https://miro.medium.com/max/1280/1*OB5z_9Wv3mgy2XMrkN76dw.gif" alt="">&lt;/p>
&lt;p>It asks what the “index.html” page is. That’s usually just “index.html”. Then it asks for a 404 page. Since we have a single page application, we’re going to direct all traffic back to the “index.html” page and handle routing ourselves.&lt;/p>
&lt;p>Now we just need to right-click our “dist” or “build” or whatever folder contains the build assets that Webpack made via whatever it is that Webpack does (nobody but &lt;a href="https://twitter.com/TheLarkInn">Sean Larkin&lt;/a> knows) and select “Deploy To Static Website”. In this case, I’m deploying a site that is written in Vue.&lt;/p>
&lt;p>&lt;img src="https://miro.medium.com/max/1281/1*yGN41vTumZskHeRHOoKYpA.png" alt="">&lt;/p>
&lt;p>And that’s it. The extension will give you a prompt to browse the website. You will marvel at your own productivity and consider having pizza for a third night in a row. Go ahead. Treat yourself.&lt;/p>
&lt;p>&lt;img src="https://miro.medium.com/max/1392/1*153NnRgd61tH9U4URyjCNg.png" alt="">&lt;/p>
&lt;p>Azure Storage is the preferred method for hosting a static site. Here’s why…&lt;/p>
&lt;ul>
&lt;li>It’s Simple&lt;/li>
&lt;li>It’s Fast&lt;/li>
&lt;li>It’s Cheap — 20 cents per gig of storage per month / 8 cents per gig outbound data transfer, but you get the first 5 gigs every month free.&lt;/li>
&lt;li>It automatically scales&lt;/li>
&lt;li>IT’S SERVERLESS. I used a buzzword. You have to be convinced now.&lt;/li>
&lt;/ul>
&lt;h2 id="azure-app-service">Azure App Service&lt;/h2>
&lt;p>&lt;a href="https://docs.microsoft.com/en-us/azure/app-service/?WT.mc_id=personal-medium-buhollan">App Service&lt;/a> is Azure’s Platform as a Service or “PaaS”. It’s different from Storage because it provides a runtime for your server-side projects. If you had an ASP.NET application, you would run it in App Service. You can’t run it in Azure Storage because Storage doesn’t know how to run applications.&lt;/p>
&lt;p>You can host a static site in App Service, but because it’s designed for much more powerful server-side workflows, We need to sort of “finesse” things a bit.&lt;/p>
&lt;p>Kid gloves, people.&lt;/p>
&lt;p>I’m going to do everything via VS Code because that’s how I want to do everything in my life. I would happily take a VS Code extension for Outlook. Free startup idea right there.&lt;/p>
&lt;p>&lt;img src="https://miro.medium.com/max/2416/1*Gvs5rpNLh3I6hTMApKe4PQ.png" alt="">&lt;/p>
&lt;p>When you set up a new App Service instance, you can choose from either Linux or Windows hosting in App Service, so I’m going to cover how to publish your static site to both. And of course, we’re going to do it all from VS Code with the &lt;a href="https://marketplace.visualstudio.com/items?itemName=ms-azuretools.vscode-azureappservice&amp;amp;WT.mc_id=personal-medium-buhollan">App Service extension&lt;/a>.&lt;/p>
&lt;h3 id="linux">Linux&lt;/h3>
&lt;p>Let’s set up the new site via the VS Code extension.&lt;/p>
&lt;p>&lt;img src="https://miro.medium.com/max/2560/1*YDJJsQI1h55O-yHkZUFQ_A.gif" alt="">&lt;/p>
&lt;p>Note that I selected “LTS” as my Node version. LTS on Azure means that you get whatever the highest Node version that Azure supports is. Whenever Azure supports a newer version, your project will automatically get updated.&lt;/p>
&lt;p>App Service for Linux does not come with a baked-in web server. So you can’t just chuck your static site in there. Azure is gonna be like, “I don’t know what you want from me”. And you’ll be like, “I want you to run this site”. And Azure will be like “I don’t know how”. And you’ll feel like nobody understands you.&lt;/p>
&lt;p>To fix that, we need to send a web server up with our files. A simple way to do this is to use the &lt;a href="https://www.npmjs.com/package/serve">serve&lt;/a> package from npm.&lt;/p>
&lt;p>You also need some way to tell Azure to start “serve”. You could do that by putting a second &lt;code>package.json&lt;/code> file in your “dist” folder. But two package JSON’s is kinda ew. Not very ew, but definitely slightly ew.&lt;/p>
&lt;p>Instead, we can leverage the fact that Azure bakes &lt;a href="http://pm2.keymetrics.io/">pm2&lt;/a> into every Node.js app in App Service. pm2 is a process manager for Node, and you can start apps with it. That means that if we include the right kind of file in our project, Azure will see it and use pm2 to start our project. Here’s a video that explains pm2 in a bit more detail just in case you’re new to the pm2 crew.&lt;/p>
&lt;iframe width="560" height="315" src="https://www.youtube.com/embed/hYdSfH-0tVI" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen="">&lt;/iframe>
&lt;p>The file pm2 looks for is called ecoysystem.config.js. In that file, tell pm2 to start “serve”. Passing the -s flag makes “serve” route every request it can’t find back to index.html. We want that because we have a SPA and we are handling all the routing on the client.&lt;/p>
&lt;pre>&lt;code>module.exports = {
apps: [
{
script: &amp;quot;npx serve -s&amp;quot;
}
]
};
&lt;/code>&lt;/pre>
&lt;p>I’m also using &lt;code>npx&lt;/code> because that keeps me from having to ssh into my instance and install “serve” globally.&lt;/p>
&lt;p>Drop this file in the “dist” folder. Then deploy the “dist” folder to Azure. Boom — there is your static site. It took me 2 years here at Microsoft to figure out that simple solution. If Vue is your jam, I created a &lt;a href="https://github.com/burkeholland/dead-simple-vue-azure">simple Github repo&lt;/a> just for you.&lt;/p>
&lt;p>Now I realize that you probably don’t wanna right-click and deploy for the rest of your natural life, so instead of doing that, you can use App Service’s ability to build your project for you. Building With App Service for Linux&lt;/p>
&lt;p>If you enable Local Git or GitHub deployment on your site and then check in, Azure will pull the code, run npm install, and then automatically run npm run build. In this case, you would want the ecosystem.config.js file to be at the root and point to the “dist” folder that gets created by the build step.&lt;/p>
&lt;pre>&lt;code>module.exports = {
apps: [
{
script: &amp;quot;npx serve dist -s&amp;quot;
}
]
};
&lt;/code>&lt;/pre>
&lt;p>Now your build is taking place on Azure. All you need to do is check your code into Git — Which, let’s be honest, is hard enough as it is. It’s nice that the rest of this “just works”.&lt;/p>
&lt;blockquote>
&lt;p>Note that at the time of this writing, you need to choose Node 10.14.1 in order for the automatic builds to kick in. This should be fixed in LTS shortly (like in a couple of weeks) so I’m writing it that way to keep it fresh.&lt;/p>
&lt;/blockquote>
&lt;h3 id="windows">Windows&lt;/h3>
&lt;p>On Windows, your site kind of just works. Kind of. This is because Windows for Node.js apps in App Service includes Internet Information Services (IIS), which is perfectly fine with serving up some static files. Here’s a Windows instance of my app where all I did was deploy the “dist” folder.&lt;/p>
&lt;p>&lt;img src="https://miro.medium.com/max/2784/1*tYRiq9ZPaojmrAossVw7HA.png" alt="">&lt;/p>
&lt;p>Amazing! But — there is a problem here. You can’t deep link to your app. So if you tried to go the theurlist.com/build2019 (which is a valid route), you would get this…&lt;/p>
&lt;p>&lt;img src="https://miro.medium.com/max/2784/1*YNFHYjl3YdFVaoDU5lWwow.png" alt="">&lt;/p>
&lt;p>This is because IIS is looking for “theurlist.com/build2019/index.html” — which does not exist. We need to tell IIS to just route any and all traffic to “index.html”. To do that, we need to add a web.config to the “dist” folder. Inside, define a single routing rule to catch all traffic.&lt;/p>
&lt;pre>&lt;code>&amp;lt;?xml version=&amp;quot;1.0&amp;quot;?&amp;gt;
&amp;lt;configuration&amp;gt;
&amp;lt;system.webServer&amp;gt;
&amp;lt;rewrite&amp;gt;
&amp;lt;rules&amp;gt;
&amp;lt;rule name=&amp;quot;Vue&amp;quot; stopProcessing=&amp;quot;true&amp;quot;&amp;gt;
&amp;lt;match url=&amp;quot;.*&amp;quot; /&amp;gt;
&amp;lt;conditions logicalGrouping=&amp;quot;MatchAll&amp;quot;&amp;gt;
&amp;lt;add input=&amp;quot;{REQUEST_FILENAME}&amp;quot; matchType=&amp;quot;IsFile&amp;quot; negate=&amp;quot;true&amp;quot; /&amp;gt;
&amp;lt;/conditions&amp;gt;
&amp;lt;action type=&amp;quot;Rewrite&amp;quot; url=&amp;quot;/&amp;quot; /&amp;gt;
&amp;lt;/rule&amp;gt;
&amp;lt;/rules&amp;gt;
&amp;lt;/rewrite&amp;gt;
&amp;lt;/system.webServer&amp;gt;
&amp;lt;/configuration&amp;gt;
&lt;/code>&lt;/pre>
&lt;p>As before, push the “dist” folder into Azure. Note that the automatic builds that we have on Linux do not work for Windows.&lt;/p>
&lt;h3 id="azure-web-app-for-containers">Azure Web App for Containers&lt;/h3>
&lt;p>Azure App Service actually uses containers under the covers for every site — even when you are just deploying your files. For that reason, you can also just deploy a container to App Service.&lt;/p>
&lt;p>Make sure you have &lt;a href="https://www.docker.com/">Docker&lt;/a> installed. Docker doesn’t work very well if it isn’t installed.&lt;/p>
&lt;p>Now is also a good time to tell you to….wait for it….install the &lt;a href="https://marketplace.visualstudio.com/items?itemName=ms-azuretools.vscode-docker&amp;amp;WT.mc_id=ignite2019-urlist-buhollan">Docker extension for VS Code&lt;/a>. Come on. You knew that was coming.&lt;/p>
&lt;p>First, we need to add a &lt;code>Dockerfile&lt;/code> to our project. You can just drop that in the root.&lt;/p>
&lt;p>&lt;img src="https://miro.medium.com/max/2784/1*yvq3BMrKuf-aMG1arlvlTg.png" alt="">&lt;/p>
&lt;p>To run the site in a container, we need a web server. Since we’re on a Node kick, we’ll just keep working with “serve”.&lt;/p>
&lt;blockquote>
&lt;p>Check out &lt;a href="https://gist.github.com/willurd/5720255">this gist&lt;/a> I found that shows you a bunch of different web servers that you can get running for static sites in about one line. Any of these would work in Docker.&lt;/p>
&lt;/blockquote>
&lt;p>Our Docker file with “serve” looks like this…&lt;/p>
&lt;pre>&lt;code>FROM node:alpine
# Copy in dist
COPY ./dist /app
# Install serve
RUN npm i -g serve
# Start it up
CMD serve /app -s
&lt;/code>&lt;/pre>
&lt;p>Build it with VS Code by selecting “Docker: Build Image” from the Command Palette.&lt;/p>
&lt;p>&lt;img src="https://miro.medium.com/max/2784/1*dFnsJSaDEpvtB0ZyZ3R85A.png" alt="">&lt;/p>
&lt;p>The image will then show up in VS Code under the “Docker” explorer.&lt;/p>
&lt;p>&lt;img src="https://miro.medium.com/max/2784/1*9hyAvTUWZXs9RzYHygnStA.png" alt="">&lt;/p>
&lt;p>Now push it to Docker Hub. To do that, expand the node and right-click the “latest” image and select select “tag”. You then need to enter your Docker Hub username first. The “latest” tag just means that this is the latest version of this image. Right-click it again and select “Push”. This should push it to Docker Hub. If it fails or says “Access Denied”, make sure you are signed into Docker Hub via the terminal…&lt;/p>
&lt;pre>&lt;code>$ docker login
&lt;/code>&lt;/pre>
&lt;p>Now that the image is up in Docker Hub, we can pull it into Azure. We need a site to do that. We could configure that through the portal, but that’s…not very exciting, so let’s do with the &lt;a href="https://docs.microsoft.com/cli/azure/install-azure-cli?view=azure-cli-latest&amp;amp;WT.mc_id=personal-medium-buhollan">Azure CLI&lt;/a>. Also, this article is getting long and my fingers are tired. Your eyes are probably bleeding.&lt;/p>
&lt;p>Create a Resource Group…&lt;/p>
&lt;pre>&lt;code>$ az group create -n deleteme-vue-docker
&lt;/code>&lt;/pre>
&lt;p>Create a Service Plan. Remember — this is where we choose how much resources we want from Azure. In other words, this is where you spend money.&lt;/p>
&lt;pre>&lt;code>$ az appservice plan create -n vuedocker -g deleteme-vue-docker — is-linux -l “East US” — sku S1
&lt;/code>&lt;/pre>
&lt;p>Create the new instance and pull in the container from Docker Hub…&lt;/p>
&lt;pre>&lt;code>$ az webapp create -n vue-docker -g deleteme-vue-docker -p vuedocker -i burkeholland/frontend-vue-typescript:latest
&lt;/code>&lt;/pre>
&lt;p>After that command finishes, if you scroll back up through the CLI output, you’ll see the URL of your site…&lt;/p>
&lt;p>&lt;img src="https://miro.medium.com/max/2784/1*Kf0GREvsy7b0Meo6bcXopA.png" alt="">&lt;/p>
&lt;blockquote>
&lt;p>Disclaimer: It’s a good idea to use a more full-featured web server in production than just “serve”. The reason for this is that “serve” is fairly simple and does not have some of the advanced features you might want in the future. This would be things like gzip or brottli compression, max worker connections, MIME type mappings and more. For that, I would recommend using &lt;a href="https://hub.docker.com/_/nginx/">nginx&lt;/a>. It’s not nearly as simple to setup, but it’s got all the bells and whistles.&lt;/p>
&lt;/blockquote>
&lt;h2 id="anddone">And…..DONE&lt;/h2>
&lt;p>Are you still with me? How many people did we lose along the way? Who died of dysentery?&lt;/p>
&lt;p>For those who are still awake, alert, alive and enthusiastic, let’s recap what we now know about hosting static sites in Azure.&lt;/p>
&lt;ul>
&lt;li>Preferred: Azure Storage&lt;/li>
&lt;li>Azure App Service for Linux with an &lt;code>ecosystem.config.js&lt;/code> file&lt;/li>
&lt;li>Azure App Service for Windows with a &lt;code>web.config&lt;/code>&lt;/li>
&lt;li>Azure App Service with a container&lt;/li>
&lt;/ul>
&lt;p>Choose your own destiny. Here are some additional links you might find helpful in your static site quest. Godspeed.&lt;/p></description></item><item><title>The Urlist — An application study in Serverless and Azure</title><link>https://burkeholland.github.io/posts/the-urlist/</link><pubDate>Sat, 04 May 2019 08:47:17 -0600</pubDate><guid>https://burkeholland.github.io/posts/the-urlist/</guid><description>&lt;p>Today we are pleased to announce that we (&lt;a href="https://twitter.com/burkeholland">Burke Holland&lt;/a> and &lt;a href="https://twitter.com/cecilphillip">Cecil Phillip&lt;/a>) are releasing a project called “The Urlist”. You can access it starting today at &lt;a href="https://theurlist.com">theurlist.com&lt;/a>.&lt;/p>
&lt;p>The Urlist is an application that lets you create lists of url’s that you can share with others. Get it? A list of URL’s? The Urlist? Listen, naming things is hard and all the good domains are already taken.&lt;/p>
&lt;p>This project was born out of a realization that I was ending my presentations with a slide full of links to additional resources. That’s crazy! What exactly is the audience supposed to do with that? Take a picture with their phone and then go back and manually type it all in later? What decade is this!?&lt;/p>
&lt;p>What I wanted was one, easy to remember URL that would point to the full list of resources from my session. I was surprised when I found that there weren’t a lot of options out there for doing this.&lt;/p>
&lt;p>So I enlisted the help of my friend &lt;a href="https://twitter.com">Cecil Phillip&lt;/a> and over the past several months we’ve been steadily working on this project. We debuted it last week at Microsoft BUILD 2019, and today we’re making it available to everyone.&lt;/p>
&lt;p>&lt;img src="https://cdn-images-1.medium.com/max/2764/1*uJsveuzVwZLOsczYcaZArQ.png" alt="">&lt;/p>
&lt;p>The app is pretty simple — you just start adding links that you want to group together. The app uses the Open Graph information on the site to get a title and description for your link automatically.&lt;/p>
&lt;p>&lt;img src="https://cdn-images-1.medium.com/max/2764/1*SKik0Vj9-CMTtc7rXHX0Kg.png" alt="">&lt;/p>
&lt;p>You can give your list a custom url and a description. If you don’t select a custom url, it generates one for you. When you click publish, you get a URL that points directly to all of your links. That’s it! Think of it like bit.ly, but for a bunch of links.&lt;/p>
&lt;p>&lt;img src="https://cdn-images-1.medium.com/max/2764/1*CQ7gPgbGiSezu8CiK9YNDQ.png" alt="">&lt;/p>
&lt;p>You don’t have to log in, but if you do, you can publish and then go back and manage your lists. Otherwise, your list is created anonymously and once you publish it, it’s final. Right now we only support Twitter login.&lt;/p>
&lt;p>&lt;img src="https://cdn-images-1.medium.com/max/2764/1*eY4bc_HZG8u0R4XLkkx0Tw.png" alt="">&lt;/p>
&lt;p>We had a dual motive in building this application. While we were trying to solve a problem, we were also trying to learn how to build a &lt;em>truly&lt;/em> serverless application on Azure. And we wanted a real-world use case — not a contrived example that served no actual purpose. That’s why this entire project is &lt;a href="https://github.com/the-urlist">open source&lt;/a>.&lt;/p>
&lt;h2 id="frontend-vue--typescript">&lt;strong>Frontend: Vue + TypeScript&lt;/strong>&lt;/h2>
&lt;p>The frontend is a single page app written with Vue and TypeScript. I specifically chose those two technologies because TypeScript is becoming astonishingly popular, and I wanted to see what the experience would be like with Vue.&lt;/p>
&lt;p>There’s a lot to unpack in that experience, but suffice to say that it was insightful.&lt;/p>
&lt;p>Having done it, &lt;strong>I don’t think I’m sold on the value of TypeScript for a project of this size&lt;/strong>. Strong typing is a tax. You pay the tax in exchange for better maintainability and tooling, but in a project of this size, there simply isn’t enough scale to justify the expense. I feel like there is an intersection between the lines of code in a project and when TypeScript becomes valuable. I just never reached that intersection in this project.&lt;/p>
&lt;p>&lt;img src="https://cdn-images-1.medium.com/max/2000/1*wCZlJqdnfc3i5PAgI8VZZw.png" alt="It’s not a great chart — I know. I made it in PowerPoint.">&lt;em>It’s not a great chart — I know. I made it in PowerPoint.&lt;/em>&lt;/p>
&lt;p>There is also the issue of the extensive ecosystem of Vue components, many of which do not already have typings. That leaves you in a spot where it feels like you have to coerce TypeScript into doing things that it doesn’t want to do. You end up writing “any” and “declare” a whole lot, which is basically like screaming, “LOOK AWAY, TYPESCRIPT!”&lt;/p>
&lt;p>While on the subject of Vue Components, we used a few in this app that I think are just wonderful.&lt;/p>
&lt;p>We used the &lt;a href="https://github.com/euvl/vue-js-modal">Vue Modal component&lt;/a> for…..…..modals.&lt;/p>
&lt;p>&lt;img src="https://cdn-images-1.medium.com/max/2764/1*VF2Hl-HeLGwCoCX3yzQAiw.png" alt="">&lt;/p>
&lt;p>We used the &lt;a href="https://github.com/Jexordexan/vue-slicksort">SlickSort component&lt;/a> for drag and drop sorting. This component is really cool. I like it a lot and I have no idea how it works, but it works. It even works on mobile.&lt;/p>
&lt;p>&lt;img src="https://cdn-images-1.medium.com/max/2540/1*zJH8SCydCDEYb9vf3_1RuQ.gif" alt="">&lt;/p>
&lt;p>And &lt;a href="https://vuelidate.netlify.com/">Vuelidate&lt;/a> for validation — including async validation that requires us to check with the API to see if a chosen url is available.&lt;/p>
&lt;p>&lt;img src="https://cdn-images-1.medium.com/max/2540/1*04WSOFX4HWlXEBLnmWw4ng.gif" alt="">&lt;/p>
&lt;p>The frontend is hosted on &lt;a href="https://docs.microsoft.com/en-us/azure/storage/blobs/storage-blob-static-website-host?WT.mc_id=personal-blog-buhollan">Azure Storage&lt;/a>. This is partly why we call it “Serverless”. Since Vue apps compile down to just static HTML, CSS, JavaScript and Image files, we can just host it on Azure Storage.&lt;/p>
&lt;p>It’s “Serverless” because it scales indefinitely and we only pay for what we use. In the case of Azure Storage, we pay $0.0184 per GB. The size of our entire dist folder — images and all is 1.8 MB.&lt;/p>
&lt;p>We also pay for bandwidth usage here. It costs us 8 cents per GB, but the first 5 GB every month are free. So our application has to see solid usage before we pay anything at all for bandwidth.&lt;/p>
&lt;p>Azure Storage is definitely the best way to host static sites. It’s got no overhead and it’s crazy fast. There is no container to startup. No Node server to run. You just…..can’t beat this type of hosting for single page apps.&lt;/p>
&lt;h2 id="backend-azure-functions--dotnot-core">Backend: Azure Functions + Dotnot Core&lt;/h2>
&lt;p>Cecil wrote the API with C# using &lt;a href="https://docs.microsoft.com/en-us/azure/azure-functions/functions-create-first-azure-function?WT.mc_id=personal-blog-buhollan">Azure Functions&lt;/a>. Functions is what we typically think of when someone says “serverless”. It’s the product that Microsoft positions for that market and probably falls more in line with what’s in your head when someone drops that word at a dinner party.&lt;/p>
&lt;p>We chose to build the API in C# because we wanted to mix and match technologies like you might out in a real-world application. We could have had a JavaScript stack through and through, but working across technologies gave us both a chance to widen our horizons.&lt;/p>
&lt;p>Each API endpoint has a corresponding Function. Cecil named those Functions so it’s relatively easy to figure out what they do just by looking at the names.&lt;/p>
&lt;p>&lt;img src="https://cdn-images-1.medium.com/max/2764/1*hoGLgHhT9P1Qq83C8CXVtw.png" alt="">&lt;/p>
&lt;p>He used the built-in routing capability in Azure Functions to make them RESTful endpoints. The beauty of this is that when you are working on the methods, they make sense to humans. When you are consuming them, they make sense as an API.&lt;/p>
&lt;p>&lt;img src="https://cdn-images-1.medium.com/max/2764/1*2LPCU4kCNBKMvQufNBv2jg.png" alt="">&lt;/p>
&lt;p>We also used the built-in authentication mechanism that Functions exposes via Azure’s AppService Authentication. We chose to do a social login only since we didn’t see a need to store usernames and passwords. On Cecil’s end, he followed the instructions in the “Authentication” section of the Azure Portal for our Functions app to set up a new application in Twitter and then copied the keys over.&lt;/p>
&lt;p>&lt;img src="https://cdn-images-1.medium.com/max/2764/1*xs3xIelOxtFvy6DgccjQrQ.png" alt="Relax, these aren’t our actual keys">&lt;em>Relax, these aren’t our actual keys&lt;/em>&lt;/p>
&lt;p>This lights up the /.auth endpoints in our Function app. We can now call these endpoints from our frontend and it will direct the user through the auth flow. For instance, if we want to log them in and then redirect them back to the application, we just have our “Log In” button go to this URL…&lt;/p>
&lt;pre>&lt;code>https://www.theurlist.com/.auth/login/twitter?post_login_redirect_url=https://www.theurlist.com
&lt;/code>&lt;/pre>
&lt;p>This sends the user over to Twitter to authenticate, and then back to our application. When they come back, they now have an auth cookie attached to their session. We can see that if we look at the cookies in the dev tools.&lt;/p>
&lt;p>&lt;img src="https://cdn-images-1.medium.com/max/2764/1*X3QT6vNZ5sqI4roSaofrzg.png" alt="">&lt;/p>
&lt;p>Now we can ask for information that Twitter has on the user. These are things like username, full name, avatar — ect. We do that by calling the “me” endpoint that got lit up automatically when we turned on authentication.&lt;/p>
&lt;pre>&lt;code>https://www.theurlist.com/.auth/me
&lt;/code>&lt;/pre>
&lt;p>&lt;img src="https://cdn-images-1.medium.com/max/2764/1*kJ1vdPEdXAasbxgkoIvKOg.png" alt="">&lt;/p>
&lt;p>And Cecil can now validate every request I make to the API from the frontend and get the same user information. This is how we figure out what lists are yours, and whether or not you have the right to edit them.&lt;/p>
&lt;p>&lt;img src="https://cdn-images-1.medium.com/max/2764/1*naJSalTFtawofi9JiPf3wg.png" alt="">&lt;/p>
&lt;h2 id="cosmos-db--sql-api">Cosmos DB + SQL API&lt;/h2>
&lt;p>For our data store, we used Cosmos DB and the SQL API. This allowed us to have a NoSQL data store that we could still query with SQL. I find that NoSQL is great until you need to do something beyond just a trivial query. Then everything starts to feel like chaos to me and I think of this slide from James Mickens &lt;a href="https://vimeo.com/95066828">“Computers are a sadness, I am the cure”&lt;/a>.&lt;/p>
&lt;p>&lt;img src="https://cdn-images-1.medium.com/max/2000/1*2bgFm8pty2RJ0uYCVVG-Dw.png" alt="">&lt;/p>
&lt;p>There’s also a nifty Cosmos DB extension for VS Code which makes it quite a bit easier to work with our documents and actually see the database. &lt;a href="https://marketplace.visualstudio.com/items?itemName=ms-azuretools.vscode-cosmosdb&amp;amp;WT.mc_id=personal-blog-buhollan">&lt;strong>Azure Cosmos DB - Visual Studio Marketplace&lt;/strong> *Get it now.*marketplace.visualstudio.com&lt;/a>&lt;/p>
&lt;p>There is just no substitute for being able to see your database when you are starting from the ground up. Being able to see it within VS Code is even better.&lt;/p>
&lt;p>&lt;img src="https://cdn-images-1.medium.com/max/2764/1*VLCFBhGvhPEi_vemo46qDw.png" alt="">&lt;/p>
&lt;p>Cosmos DB is one spot where our application is not, strictly speaking, serverless.&lt;/p>
&lt;p>Cosmos DB runs us ~25$ per month which gets us 100 RU’s, or “Request Units per Second”. We have to buy those up front each month, and even if we don’t use all that, we still pay for it. We are also capped there, so if our application gets super popular, we have to manually scale out by reserving more RU’s.&lt;/p>
&lt;h2 id="azure-front-door">Azure Front Door&lt;/h2>
&lt;p>We use Azure Front Door to glue the frontend and the backend together. Here’s what I mean by that…&lt;/p>
&lt;p>Our frontend runs on Azure Storage and its URL is &lt;a href="https://theurlistdotcom.z19.web.core.windows.net/">https://theurlistdotcom.z19.web.core.windows.net/&lt;/a>&lt;/p>
&lt;p>Our backend runs on Azure Functions and its URL is &lt;a href="https://linky-link.azurewebsites.net/api">https://linky-link.azurewebsites.net/api&lt;/a>.&lt;/p>
&lt;p>What we wanted was to have one domain — theurlist.com. We wanted the root to point to our Vue app, and /api to point to our API.&lt;/p>
&lt;p>To pull this off, we used a new product called &lt;a href="https://docs.microsoft.com/en-us/azure/frontdoor/quickstart-create-front-door?WT.mc_id=personal-blog-buhollan">Azure Front Door&lt;/a>.&lt;/p>
&lt;p>Front Door bills itself as a tool for “highly available global applications”.&lt;/p>
&lt;p>In our case, we were less interested in that and more interested in it’s ability to let us stand up an entry point for our application and organize all of the pieces behind that single point of entry.&lt;/p>
&lt;p>Front Door works via a visual designer interface. It starts off by giving you a “Frontend Host”. By default you get…&lt;appname>.azurefd.net. That’s the URL via which you can access your site. You can also add a custom domain which we’ll do in a second.&lt;/appname>&lt;/p>
&lt;p>&lt;img src="https://cdn-images-1.medium.com/max/2764/1*U3Vu1ZdXCJB9EGwGKMgMNQ.png" alt="">&lt;/p>
&lt;p>It then wants you to identify “Backend Pools”. These are just the resources that you want to direct traffic to. For us, that’s the static site on the frontend, and the Functions app on the backend. I’ve just called mine “urlist-frontend” and “urlist-backend”. If you look inside them, they point to Storage and Functions respectively.&lt;/p>
&lt;p>&lt;img src="https://cdn-images-1.medium.com/max/2764/1*Hx92izN0y4gV91_VOIcFdA.png" alt="">&lt;/p>
&lt;p>Last, we have the routes that we want to define.&lt;/p>
&lt;p>&lt;img src="https://cdn-images-1.medium.com/max/2764/1*RSG9B1U64mMza_hK_7vyUQ.png" alt="">&lt;/p>
&lt;p>In our case, we have four routes…&lt;/p>
&lt;ol>
&lt;li>
&lt;p>The root of our site, which points to urlist-frontend in our “Backend pools”&lt;/p>
&lt;/li>
&lt;li>
&lt;p>/api which points to urlist-backend in our “Backend pools”&lt;/p>
&lt;/li>
&lt;li>
&lt;p>/.auth which points to urlist-backend in our “Backend pools”&lt;/p>
&lt;/li>
&lt;li>
&lt;p>A route which redirects all http traffic to https&lt;/p>
&lt;/li>
&lt;/ol>
&lt;p>Our custom domain gets added to the “Frontend hosts” section. We add a new domain by pointing to theurlist.azurefd.net with a www CNAME in our DNS. Front Door then verifies that is the case, and magically creates and assigns us an SSL certificate for &lt;a href="http://www.theurlist.com.">www.theurlist.com&lt;/a>. Not having to configure SSL was….kind of amazing.&lt;/p>
&lt;p>Front Door also acts as a CDN for our app. It’s just sort of built-in to the product. That means that we are cached at the edge around the globe which just increases the speed at which we can get the app into people’s browsers.&lt;/p>
&lt;h2 id="solving-the-a-record-problem">Solving The A Record Problem&lt;/h2>
&lt;p>The last thing we had to do was figure out how to get Azure Front Door behind an A record.&lt;/p>
&lt;p>When you stand up a custom domain, you need to give it an A record. This is often called a “naked domain”. It’s just the domain, without www. In our case, that’s theurlist.com. The problem is that A records have to be an IP address, and Front Door doesn’t give us an IP. It only gives us that theurlist.azurefd.net.&lt;/p>
&lt;p>To solve this, we decided to simply redirect any traffic coming to theurlist.com over to &lt;a href="http://www.theurlist.com.">www.theurlist.com.&lt;/a>&lt;/p>
&lt;p>I registered the domain with NameCheap, but I was unable to get their redirect rules to reliably work. In the end, we stood up a Cloudflare instance as our DNS. Cloudflare allows us to create a CNAME for the root (@) and point it at &lt;a href="http://www.theurlist.com">www.theurlist.com&lt;/a>. Now we already said you can’t do this — and you can’t according to the DNS spec. But Cloudflare allows it with something called “CNAME Flattening”.&lt;/p>
&lt;h3 id="cname-flattening">CNAME Flattening&lt;/h3>
&lt;p>When you create a CNAME and point it at the root, Cloudflare basically resolves the IP of theurlist.azurefd.net and that’s what get’s returned as the A record. The problem is that in the case of Front Door, we can’t go directly to the IP, because the IP is the load balancer. It doesn’t know which site we want if we just navigate to the IP.&lt;/p>
&lt;p>&lt;img src="https://cdn-images-1.medium.com/max/2764/1*e9Luold75LuZILF2LPNYww.png" alt="">&lt;/p>
&lt;p>Since we are already going through Cloudflare to resolve our domain, we can add a page rule in Cloudflare to capture all traffic and redirect it. That orange cloud in the image above indicates that traffic flows through Cloudflare’s HTTP proxy. That’s how we can capture it and redirect it with a page rule.&lt;/p>
&lt;p>&lt;img src="https://cdn-images-1.medium.com/max/2764/1*OeaUh43csd_GnsdBZ84RrA.png" alt="">&lt;/p>
&lt;p>It took me a while to figure out what I had to use a *in my path to capture the rest of the path, and then a $1 in the redirect to pass it through.&lt;/p>
&lt;p>This gives us a naked domain without needing an IP address. Ship it.&lt;/p>
&lt;p>Azure Front Door is priced by route. The first five routes cost $21 total. Outside of that, it is consumption based at around 25 cents per GB transferred. There is a little up-front cost here, but we get a lot more with Front Door than just an endpoint…&lt;/p>
&lt;ul>
&lt;li>
&lt;p>SSL&lt;/p>
&lt;/li>
&lt;li>
&lt;p>CDN&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Global HTTP balancing&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Application acceleration&lt;/p>
&lt;/li>
&lt;li>
&lt;p>System health monitoring&lt;/p>
&lt;/li>
&lt;/ul>
&lt;h2 id="share-the-internet">Share the internet&lt;/h2>
&lt;p>I came up with that tag line myself. Do you like it? Should I go on Shark Tank? Are we going to IPO this year?&lt;/p>
&lt;p>We think this application is interesting not just because it shows how &lt;em>we&lt;/em> would build a web application, but also because we think that the &lt;em>way&lt;/em> we’ve leveraged Azure provides the &lt;strong>maximum amount of speed and scale for the dollar&lt;/strong>.&lt;/p>
&lt;p>If you’re interested, you can check out Build 2019 session on The Urlist called, “The good, the bad and the ugly of serverless”.&lt;/p>
&lt;center>&lt;iframe width="560" height="315" src="https://www.youtube.com/embed/T5ULvFk134U" frameborder="0" allowfullscreen="">&lt;/iframe>&lt;/center>
&lt;p>We hope that this application is useful for you not just from a code and architecture standpoint, but also as an actual application that you can use to share your links. We’d love to see your &lt;a href="https://github.com/the-urlist">issues and PR’s&lt;/a>!&lt;/p></description></item><item><title>GitLens with Eric Amodio</title><link>https://burkeholland.github.io/posts/git-lens-eric/</link><pubDate>Fri, 07 Dec 2018 08:49:37 -0600</pubDate><guid>https://burkeholland.github.io/posts/git-lens-eric/</guid><description>&lt;p>There are only two kinds of people in the world: those who are utterly confused by Git, and those who refuse to admit it.&lt;/p>
&lt;center>![](https://cdn-images-1.medium.com/max/2000/1*hvJgiUToHU6NEGzy397LbA.jpeg)&lt;/center>
&lt;p>Well, ok, there are probably &lt;em>some&lt;/em> people who understand it, but I’m definitely not one of them.&lt;/p>
&lt;p>As a result, people like me (which is most of us — zero evidence to prove that so just accept it as fact and let it wash over you) tend to learn the base amount of Git that we need to get by (clone, pull, add, commit) and the rest we try really hard to avoid because we have zero confidence that we’ll be able to do it without breaking literally everything.&lt;/p>
&lt;p>GitLens is an extension for VS Code that puts virtually all of the functionality of Git into the editor. You then get a visual interface for all Git actions, and anytime you can actually SEE what you are doing, things get exponentially easier.&lt;/p>
&lt;p>&lt;a href="https://marketplace.visualstudio.com/items?itemName=eamodio.gitlens?WT.mc_id=none-medium-buhollan">GitLens for VS Code&lt;/a>&lt;/p>
&lt;p>I wanted to really get to know GitLens, because I want to stop living in fear of Git. So I sat down with the creator of GitLens, Eric Amodio, and asked him to walk me through the extension, and how it works. I figured, if anyone knows Git, it’s probably this guy.&lt;/p>
&lt;p>So here’s 45 minutes of yours truly stumbling through what might be the best extension for VS Code, and one very patient extension creator who was nice enough to show me the way.&lt;/p>
&lt;center>&lt;iframe width="560" height="315" src="https://www.youtube.com/embed/YSgDQHyQASk" frameborder="0" allowfullscreen="">&lt;/iframe>&lt;/center></description></item></channel></rss>